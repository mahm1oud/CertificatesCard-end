import{u as A,r as D,b as g,j as e,B as t,L as r,c as w,C as d,s as n,t as c,d as m,A as p,v as o,e as F,U as I,S as q,g as v}from"./index-DoMHCGG2.js";import{T as P,a as z,b,c as y}from"./tabs-CKJmMpcu.js";import{P as E}from"./plus-B2are30l.js";import{F as j}from"./file-image-CUREGKCZ.js";import{E as f}from"./eye-Co1cENxs.js";import{S as K}from"./share-2-C3FB-j83.js";import{P as V}from"./palette-Bp1rK65v.js";function M(){const{user:h}=A(),[C,U]=D.useState("overview"),{data:l,isLoading:$}=g({queryKey:["/api/user/stats"],queryFn:v({})}),{data:i,isLoading:L}=g({queryKey:["/api/user/cards/recent"],queryFn:v({})}),{data:x,isLoading:S}=g({queryKey:["/api/user/certificates/recent"],queryFn:v({})}),N=$||L||S,T=s=>{const a=new Date(s);return new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).format(a)};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"لوحة التحكم"}),e.jsxs("p",{className:"text-muted-foreground",children:["مرحباً ",(h==null?void 0:h.name)||(h==null?void 0:h.username),"، مرحباً بك في لوحة التحكم الخاصة بك"]})]}),e.jsx(t,{asChild:!0,children:e.jsxs(r,{href:"/",children:[e.jsx(E,{className:"h-4 w-4 ml-2"}),"إنشاء بطاقة جديدة"]})})]}),e.jsxs(P,{value:C,onValueChange:U,children:[e.jsxs(z,{className:"grid w-full grid-cols-3 md:w-auto",children:[e.jsx(b,{value:"overview",children:"نظرة عامة"}),e.jsx(b,{value:"recent",children:"النشاط الأخير"}),e.jsx(b,{value:"popular",children:"الأكثر مشاهدة"})]}),e.jsx(y,{value:"overview",className:"space-y-6",children:N?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"البطاقات"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.totalCards)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(l==null?void 0:l.activeCards)||0," نشطة • ",(l==null?void 0:l.draftCards)||0," مسودة"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"الشهادات"}),e.jsx(p,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.totalCertificates)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(l==null?void 0:l.activeCertificates)||0," نشطة • ",(l==null?void 0:l.expiredCertificates)||0," منتهية"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"المشاهدات"}),e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.totalViews)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["هذا الشهر: ",(l==null?void 0:l.monthlyViews)||0]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"المشاركات"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.totalShares)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["هذا الشهر: ",(l==null?void 0:l.monthlyShares)||0]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(d,{className:"col-span-1 md:col-span-2",children:[e.jsxs(n,{children:[e.jsx(c,{children:"البطاقات الأخيرة"}),e.jsx(o,{children:"آخر البطاقات التي أنشأتها"})]}),e.jsx(m,{children:i!=null&&i.length?e.jsx("div",{className:"space-y-4",children:i.slice(0,5).map(s=>{var a,u;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-muted",children:s.imageUrl?e.jsx("img",{src:s.thumbnailUrl||s.imageUrl,alt:((a=s.template)==null?void 0:a.title)||`بطاقة ${s.id}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full text-muted-foreground",children:e.jsx(j,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium truncate",children:((u=s.template)==null?void 0:u.title)||`بطاقة ${s.id}`}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString("ar-SA")})]}),e.jsx(t,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(r,{href:`/view/${s.publicId}`,children:e.jsx(f,{className:"h-4 w-4"})})})]},s.id)})}):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"لم تقم بإنشاء أي بطاقات حتى الآن"})}),e.jsx(F,{children:e.jsx(t,{asChild:!0,variant:"outline",className:"w-full",children:e.jsx(r,{href:"/user/cards",children:"عرض جميع البطاقات"})})})]}),e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"الروابط السريعة"}),e.jsx(o,{children:"روابط سريعة للوصول إلى المميزات"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(r,{href:"/",children:[e.jsx(V,{className:"h-4 w-4 ml-2"}),"استعراض القوالب"]})}),e.jsx(t,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(r,{href:"/user/cards",children:[e.jsx(j,{className:"h-4 w-4 ml-2"}),"إدارة البطاقات"]})}),e.jsx(t,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(r,{href:"/user/certificates",children:[e.jsx(p,{className:"h-4 w-4 ml-2"}),"إدارة الشهادات"]})}),e.jsx(t,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(r,{href:"/user/profile",children:[e.jsx(I,{className:"h-4 w-4 ml-2"}),"الملف الشخصي"]})}),e.jsx(t,{asChild:!0,variant:"outline",className:"w-full justify-start",children:e.jsxs(r,{href:"/user/preferences",children:[e.jsx(q,{className:"h-4 w-4 ml-2"}),"تفضيلات المستخدم"]})})]})})]})]})]})}),e.jsx(y,{value:"recent",className:"space-y-6",children:N?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"النشاط الأخير"}),e.jsx(o,{children:"آخر الأنشطة على البطاقات والشهادات"})]}),e.jsx(m,{children:i!=null&&i.length||x!=null&&x.length?e.jsx("div",{className:"space-y-6",children:[...(i||[]).map(s=>{var a;return{id:`card-${s.id}`,title:((a=s.template)==null?void 0:a.title)||`بطاقة ${s.id}`,type:"card",date:s.updatedAt||s.createdAt,url:`/view/${s.publicId}`,publicId:s.publicId,thumbnail:s.thumbnailUrl||s.imageUrl,status:s.status}}),...(x||[]).map(s=>({id:`cert-${s.id}`,title:s.title,type:"certificate",date:s.createdAt,url:`/certificates/verify/${s.verificationCode}`,publicId:s.publicId,thumbnail:s.imageUrl,status:s.status}))].sort((s,a)=>new Date(a.date).getTime()-new Date(s.date).getTime()).slice(0,10).map(s=>e.jsxs("div",{className:"flex items-start gap-4 border-b pb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-muted",children:s.thumbnail?e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full text-muted-foreground",children:s.type==="card"?e.jsx(j,{className:"h-5 w-5"}):e.jsx(p,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-800":s.status==="draft"?"bg-yellow-100 text-yellow-800":s.status==="expired"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.status==="active"?"نشط":s.status==="draft"?"مسودة":s.status==="expired"?"منتهي":s.status})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.type==="card"?"بطاقة":"شهادة"," • ",T(s.date)]})]}),e.jsx(t,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(r,{href:s.url,children:e.jsx(f,{className:"h-4 w-4"})})})]},s.id))}):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"لم يتم تسجيل أي أنشطة حتى الآن"})})]})}),e.jsx(y,{value:"popular",className:"space-y-6",children:N?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"البطاقات الأكثر مشاهدة"}),e.jsx(o,{children:"البطاقات التي حصلت على أكبر عدد من المشاهدات"})]}),e.jsx(m,{children:i!=null&&i.length?e.jsx("div",{className:"space-y-4",children:i.sort((s,a)=>(a.accessCount||0)-(s.accessCount||0)).slice(0,5).map(s=>{var a,u;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md overflow-hidden bg-muted",children:s.thumbnailUrl||s.imageUrl?e.jsx("img",{src:s.thumbnailUrl||s.imageUrl,alt:((a=s.template)==null?void 0:a.title)||`بطاقة ${s.id}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full text-muted-foreground",children:e.jsx(j,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium truncate",children:((u=s.template)==null?void 0:u.title)||`بطاقة ${s.id}`}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["المشاهدات: ",s.accessCount||0]})]}),e.jsx(t,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(r,{href:`/view/${s.publicId}`,children:e.jsx(f,{className:"h-4 w-4"})})})]},s.id)})}):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"لا يوجد بيانات متاحة"})})]}),e.jsxs(d,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"الشهادات الأكثر تحققاً"}),e.jsx(o,{children:"الشهادات التي تم التحقق منها أكثر من مرة"})]}),e.jsx(m,{children:x!=null&&x.length?e.jsx("div",{className:"space-y-4",children:x.sort((s,a)=>(a.verificationCount||0)-(s.verificationCount||0)).slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md overflow-hidden bg-muted",children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full text-muted-foreground",children:e.jsx(p,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium truncate",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["التحققات: ",s.verificationCount||0]})]}),e.jsx(t,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(r,{href:`/certificates/verify/${s.verificationCode}`,children:e.jsx(f,{className:"h-4 w-4"})})})]},s.id))}):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"لا يوجد بيانات متاحة"})})]})]})})]})]})}export{M as default};
