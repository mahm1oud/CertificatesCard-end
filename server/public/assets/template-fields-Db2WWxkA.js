import{n as qt,h as xi,r as N,b as Sr,i as Dr,j as l,c as Ge,B as L,l as Ke,R as U,$ as Ho,a0 as Uo,a1 as qo,o as Vo,a as zo,q as Jo,x as Ko}from"./index-DoMHCGG2.js";import{I as Y}from"./input-COMsjQRu.js";import{L as R}from"./label-DSWK9Bhr.js";import{T as Yo,a as Xo,b as Ur,c as qr}from"./tabs-CKJmMpcu.js";import{D as Vt,b as zt,c as Jt,d as Kt,e as yi,f as Xr}from"./dialog-fsPDLJiu.js";import{C as De}from"./checkbox-Da8DgAL4.js";import{S as Di}from"./scroll-area-BaWF6YIt.js";import{S as Ye,a as Xe,b as Qe,c as Ze,d as k}from"./select-CRu623qS.js";import{S as hr}from"./slider-ef3OeGSW.js";import{A as Qo,a as Zo,F as _o}from"./FieldsPositionEditor-_KSUMmZv.js";import{S as el}from"./save-CRRscGsZ.js";import{C as rl}from"./copy-DCUs-YoJ.js";import{L as tl}from"./layers-D3_CD2xn.js";import{P as nl}from"./panel-left-CzVvhOjt.js";import{I as Pa}from"./image-CRCqvbIG.js";import{P as Ea}from"./plus-B2are30l.js";import{C as al}from"./chevron-up-DgjV3eGa.js";import{T as il}from"./trash-2-Dn6YYs7e.js";import"./index-BdQq_4o_.js";import"./switch-DKvoDZdm.js";import"./alert-DFZX5DlC.js";import"./ReactKonvaCore-0IBzjN_D.js";import"./rotate-ccw-JEJsQ_rj.js";import"./rotate-cw-CTNsAp4T.js";import"./zoom-out-eiDS2u6d.js";import"./maximize-ghBMrwjq.js";import"./magnet-CnbLQg6V.js";import"./eye-Co1cENxs.js";import"./download-CkzZtpS5.js";import"./form-DyTRWEbF.js";import"./badge-D9F70VlA.js";import"./type-DWs-uHqd.js";import"./file-image-CUREGKCZ.js";import"./align-right-D7bOis_1.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=qt("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=qt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=qt("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);function ll({open:e,onOpenChange:r,sourceTemplateId:t,onSuccess:n}){var re;const{toast:a}=xi(),[i,o]=N.useState(""),[s,c]=N.useState([]),[p,v]=N.useState(!0),[d,u]=N.useState("selectTemplate"),{data:g,isLoading:h}=Sr({queryKey:["/api/templates"],enabled:e}),{data:b,isLoading:x}=Sr({queryKey:[`/api/admin/template-fields/${t}`],enabled:e}),{data:y,isLoading:D}=Sr({queryKey:[`/api/admin/template-fields/${i}`],enabled:!!i&&d==="selectFields"}),C=((re=g==null?void 0:g.templates)==null?void 0:re.filter(O=>O.id!==t))||[],f=b||[],S=y||[],I=O=>S.some(J=>J.name===O.name)?"duplicate":"available";N.useEffect(()=>{if(d==="selectFields"&&f.length>0){const O=f.filter(J=>I(J)!=="duplicate").map(J=>J.id);c(O),v(O.length===f.length)}},[d,f,S]),N.useEffect(()=>{f.length>0&&v(s.length===f.length)},[s,f]);const B=Dr({mutationFn:()=>Ke({url:"/api/templates/copy-fields",method:"POST",body:{sourceTemplateId:t,targetTemplateId:parseInt(i),fieldIds:s}}),onSuccess:()=>{a({title:"تم نسخ الحقول بنجاح",description:`تم نسخ ${s.length} حقل إلى القالب المحدد`}),r(!1),n(),u("selectTemplate"),o(""),c([])},onError:O=>{a({title:"حدث خطأ",description:O.message||"حدث خطأ أثناء نسخ الحقول",variant:"destructive"})}}),W=O=>{if(v(O),O){const J=f.filter(X=>I(X)!=="duplicate").map(X=>X.id);c(J)}else c([])},T=(O,J)=>{c(J?X=>[...X,O]:X=>X.filter(te=>te!==O))},F=f.length>0,M=f.some(O=>I(O)!=="duplicate"),Q=()=>{if(!i){a({title:"يرجى اختيار قالب",description:"يجب عليك اختيار قالب لنسخ الحقول إليه",variant:"destructive"});return}if(!F){a({title:"لا توجد حقول",description:"لا توجد حقول في القالب المصدر للنسخ",variant:"destructive"});return}u("selectFields")},ie=O=>{if(O.preventDefault(),s.length===0){a({title:"يرجى اختيار حقول",description:"يجب عليك اختيار حقل واحد على الأقل لنسخه",variant:"destructive"});return}B.mutate()},q=()=>{u("selectTemplate")};return l.jsx(Vt,{open:e,onOpenChange:r,children:l.jsxs(zt,{className:"sm:max-w-md",children:[l.jsxs(Jt,{children:[l.jsx(Kt,{children:"نسخ حقول القالب"}),l.jsx(yi,{children:d==="selectTemplate"?"اختر القالب الهدف الذي تريد نسخ الحقول إليه":"حدد الحقول التي تريد نسخها إلى القالب الهدف"})]}),d==="selectTemplate"?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(R,{htmlFor:"targetTemplate",children:"اختر القالب الهدف"}),h?l.jsx("div",{className:"flex justify-center p-4",children:l.jsx(Ge,{className:"h-6 w-6 animate-spin text-primary"})}):C.length>0?l.jsxs(Ye,{value:i,onValueChange:o,children:[l.jsx(Xe,{id:"targetTemplate",children:l.jsx(Qe,{placeholder:"اختر قالباً لنسخ الحقول إليه"})}),l.jsx(Ze,{children:C.map(O=>l.jsx(k,{value:O.id.toString(),children:O.title},O.id))})]}):l.jsx("div",{className:"text-center p-4 border rounded-md",children:l.jsx("p",{className:"text-muted-foreground",children:"لا توجد قوالب أخرى متاحة لنسخ الحقول إليها"})})]}),x?l.jsx("div",{className:"flex justify-center p-4",children:l.jsx(Ge,{className:"h-6 w-6 animate-spin text-primary"})}):F?null:l.jsx("div",{className:"text-center p-4 border rounded-md",children:l.jsx("p",{className:"text-muted-foreground",children:"لا توجد حقول في القالب المصدر للنسخ"})}),l.jsxs(Xr,{className:"mt-6",children:[l.jsx(L,{type:"button",variant:"outline",onClick:()=>r(!1),children:"إلغاء"}),l.jsx(L,{type:"button",onClick:Q,disabled:!i||!F||x,children:"التالي"})]})]}):l.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[D?l.jsx("div",{className:"flex justify-center p-4",children:l.jsx(Ge,{className:"h-6 w-6 animate-spin text-primary"})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[l.jsx(De,{id:"selectAll",checked:p,onCheckedChange:W,disabled:!M}),l.jsx(R,{htmlFor:"selectAll",children:"تحديد الكل"})]}),l.jsx(Di,{className:"h-[300px] border rounded-md p-4",children:l.jsxs("div",{className:"space-y-3",children:[f.map(O=>{const J=I(O)==="duplicate";return l.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[l.jsx(De,{id:`field-${O.id}`,checked:s.includes(O.id),onCheckedChange:X=>T(O.id,!!X),disabled:J}),l.jsxs("div",{className:"grid gap-1",children:[l.jsxs(R,{htmlFor:`field-${O.id}`,className:J?"text-muted-foreground line-through":"",children:[O.label,l.jsxs("span",{className:"text-xs text-muted-foreground mr-1",children:["(",O.name,")"]})]}),J&&l.jsx("p",{className:"text-xs text-destructive",children:"هذا الحقل موجود مسبقاً في القالب الهدف"})]})]},O.id)}),f.length===0&&l.jsx("p",{className:"text-center text-muted-foreground",children:"لا توجد حقول في القالب المصدر"})]})})]}),l.jsxs(Xr,{className:"mt-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(L,{type:"button",variant:"outline",onClick:q,disabled:B.isPending,children:"رجوع"}),l.jsx(L,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:B.isPending,children:"إلغاء"})]}),l.jsx(L,{type:"submit",disabled:s.length===0||B.isPending,children:B.isPending?l.jsxs(l.Fragment,{children:[l.jsx(Ge,{className:"h-4 w-4 mr-2 animate-spin"}),"جاري النسخ..."]}):"نسخ الحقول"})]})]})]})})}function Lt(e,r){return Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Lt(e,r)}function wi(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,Lt(e,r)}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},A.apply(null,arguments)}function Nr(e){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nr(e)}function sl(e,r){if(Nr(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(Nr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function cl(e){var r=sl(e,"string");return Nr(r)=="symbol"?r:r+""}function dl(e,r,t){return(r=cl(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Oa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ra(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Oa(Object(t),!0).forEach(function(n){dl(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function se(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ba=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Nt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ta={INIT:"@@redux/INIT"+Nt(),REPLACE:"@@redux/REPLACE"+Nt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Nt()}};function ul(e){if(typeof e!="object"||e===null)return!1;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function Ci(e,r,t){var n;if(typeof r=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(se(0));if(typeof r=="function"&&typeof t>"u"&&(t=r,r=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(se(1));return t(Ci)(e,r)}if(typeof e!="function")throw new Error(se(2));var a=e,i=r,o=[],s=o,c=!1;function p(){s===o&&(s=o.slice())}function v(){if(c)throw new Error(se(3));return i}function d(b){if(typeof b!="function")throw new Error(se(4));if(c)throw new Error(se(5));var x=!0;return p(),s.push(b),function(){if(x){if(c)throw new Error(se(6));x=!1,p();var D=s.indexOf(b);s.splice(D,1),o=null}}}function u(b){if(!ul(b))throw new Error(se(7));if(typeof b.type>"u")throw new Error(se(8));if(c)throw new Error(se(9));try{c=!0,i=a(i,b)}finally{c=!1}for(var x=o=s,y=0;y<x.length;y++){var D=x[y];D()}return b}function g(b){if(typeof b!="function")throw new Error(se(10));a=b,u({type:Ta.REPLACE})}function h(){var b,x=d;return b={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(se(11));function C(){D.next&&D.next(v())}C();var f=x(C);return{unsubscribe:f}}},b[Ba]=function(){return this},b}return u({type:Ta.INIT}),n={dispatch:u,subscribe:d,getState:v,replaceReducer:g},n[Ba]=h,n}function Ma(e,r){return function(){return r(e.apply(this,arguments))}}function Fa(e,r){if(typeof e=="function")return Ma(e,r);if(typeof e!="object"||e===null)throw new Error(se(16));var t={};for(var n in e){var a=e[n];typeof a=="function"&&(t[n]=Ma(a,r))}return t}function Ni(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.length===0?function(n){return n}:r.length===1?r[0]:r.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function pl(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(se(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=r.map(function(c){return c(o)});return i=Ni.apply(void 0,s)(a.dispatch),Ra(Ra({},a),{},{dispatch:i})}}}var Ii=U.createContext(null);function vl(e){e()}var ji=vl,fl=function(r){return ji=r},gl=function(){return ji};function ml(){var e=gl(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var a=r;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=r;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=t={callback:a,next:null,prev:t};return o.prev?o.prev.next=o:r=o,function(){!i||r===null||(i=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:r=o.next)}}}}var La={notify:function(){},get:function(){return[]}};function Pi(e,r){var t,n=La;function a(d){return c(),n.subscribe(d)}function i(){n.notify()}function o(){v.onStateChange&&v.onStateChange()}function s(){return!!t}function c(){t||(t=r?r.addNestedSub(o):e.subscribe(o),n=ml())}function p(){t&&(t(),t=void 0,n.clear(),n=La)}var v={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:s,trySubscribe:c,tryUnsubscribe:p,getListeners:function(){return n}};return v}var Ei=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?N.useLayoutEffect:N.useEffect;function hl(e){var r=e.store,t=e.context,n=e.children,a=N.useMemo(function(){var s=Pi(r);return{store:r,subscription:s}},[r]),i=N.useMemo(function(){return r.getState()},[r]);Ei(function(){var s=a.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),i!==r.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[a,i]);var o=t||Ii;return U.createElement(o.Provider,{value:a},n)}function Qr(e,r){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;t[n]=e[n]}return t}var Ai={exports:{}},$={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee=typeof Symbol=="function"&&Symbol.for,Yt=ee?Symbol.for("react.element"):60103,Xt=ee?Symbol.for("react.portal"):60106,ot=ee?Symbol.for("react.fragment"):60107,lt=ee?Symbol.for("react.strict_mode"):60108,st=ee?Symbol.for("react.profiler"):60114,ct=ee?Symbol.for("react.provider"):60109,dt=ee?Symbol.for("react.context"):60110,Qt=ee?Symbol.for("react.async_mode"):60111,ut=ee?Symbol.for("react.concurrent_mode"):60111,pt=ee?Symbol.for("react.forward_ref"):60112,vt=ee?Symbol.for("react.suspense"):60113,bl=ee?Symbol.for("react.suspense_list"):60120,ft=ee?Symbol.for("react.memo"):60115,gt=ee?Symbol.for("react.lazy"):60116,xl=ee?Symbol.for("react.block"):60121,yl=ee?Symbol.for("react.fundamental"):60117,Dl=ee?Symbol.for("react.responder"):60118,Sl=ee?Symbol.for("react.scope"):60119;function pe(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case Yt:switch(e=e.type,e){case Qt:case ut:case ot:case st:case lt:case vt:return e;default:switch(e=e&&e.$$typeof,e){case dt:case pt:case gt:case ft:case ct:return e;default:return r}}case Xt:return r}}}function Oi(e){return pe(e)===ut}$.AsyncMode=Qt;$.ConcurrentMode=ut;$.ContextConsumer=dt;$.ContextProvider=ct;$.Element=Yt;$.ForwardRef=pt;$.Fragment=ot;$.Lazy=gt;$.Memo=ft;$.Portal=Xt;$.Profiler=st;$.StrictMode=lt;$.Suspense=vt;$.isAsyncMode=function(e){return Oi(e)||pe(e)===Qt};$.isConcurrentMode=Oi;$.isContextConsumer=function(e){return pe(e)===dt};$.isContextProvider=function(e){return pe(e)===ct};$.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yt};$.isForwardRef=function(e){return pe(e)===pt};$.isFragment=function(e){return pe(e)===ot};$.isLazy=function(e){return pe(e)===gt};$.isMemo=function(e){return pe(e)===ft};$.isPortal=function(e){return pe(e)===Xt};$.isProfiler=function(e){return pe(e)===st};$.isStrictMode=function(e){return pe(e)===lt};$.isSuspense=function(e){return pe(e)===vt};$.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ot||e===ut||e===st||e===lt||e===vt||e===bl||typeof e=="object"&&e!==null&&(e.$$typeof===gt||e.$$typeof===ft||e.$$typeof===ct||e.$$typeof===dt||e.$$typeof===pt||e.$$typeof===yl||e.$$typeof===Dl||e.$$typeof===Sl||e.$$typeof===xl)};$.typeOf=pe;Ai.exports=$;var wl=Ai.exports,Zt=wl,Cl={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Nl={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Il={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ri={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_t={};_t[Zt.ForwardRef]=Il;_t[Zt.Memo]=Ri;function Ga(e){return Zt.isMemo(e)?Ri:_t[e.$$typeof]||Cl}var jl=Object.defineProperty,Pl=Object.getOwnPropertyNames,Wa=Object.getOwnPropertySymbols,El=Object.getOwnPropertyDescriptor,Al=Object.getPrototypeOf,$a=Object.prototype;function Bi(e,r,t){if(typeof r!="string"){if($a){var n=Al(r);n&&n!==$a&&Bi(e,n,t)}var a=Pl(r);Wa&&(a=a.concat(Wa(r)));for(var i=Ga(e),o=Ga(r),s=0;s<a.length;++s){var c=a[s];if(!Nl[c]&&!(t&&t[c])&&!(o&&o[c])&&!(i&&i[c])){var p=El(r,c);try{jl(e,c,p)}catch{}}}}return e}var Ol=Bi;const ka=Ho(Ol);var Ti={exports:{}},H={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt=60103,ht=60106,Or=60107,Rr=60108,Br=60114,Tr=60109,Mr=60110,Fr=60112,Lr=60113,en=60120,Gr=60115,Wr=60116,Mi=60121,Fi=60122,Li=60117,Gi=60129,Wi=60131;if(typeof Symbol=="function"&&Symbol.for){var ne=Symbol.for;mt=ne("react.element"),ht=ne("react.portal"),Or=ne("react.fragment"),Rr=ne("react.strict_mode"),Br=ne("react.profiler"),Tr=ne("react.provider"),Mr=ne("react.context"),Fr=ne("react.forward_ref"),Lr=ne("react.suspense"),en=ne("react.suspense_list"),Gr=ne("react.memo"),Wr=ne("react.lazy"),Mi=ne("react.block"),Fi=ne("react.server.block"),Li=ne("react.fundamental"),Gi=ne("react.debug_trace_mode"),Wi=ne("react.legacy_hidden")}function be(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case mt:switch(e=e.type,e){case Or:case Br:case Rr:case Lr:case en:return e;default:switch(e=e&&e.$$typeof,e){case Mr:case Fr:case Wr:case Gr:case Tr:return e;default:return r}}case ht:return r}}}var Rl=Tr,Bl=mt,Tl=Fr,Ml=Or,Fl=Wr,Ll=Gr,Gl=ht,Wl=Br,$l=Rr,kl=Lr;H.ContextConsumer=Mr;H.ContextProvider=Rl;H.Element=Bl;H.ForwardRef=Tl;H.Fragment=Ml;H.Lazy=Fl;H.Memo=Ll;H.Portal=Gl;H.Profiler=Wl;H.StrictMode=$l;H.Suspense=kl;H.isAsyncMode=function(){return!1};H.isConcurrentMode=function(){return!1};H.isContextConsumer=function(e){return be(e)===Mr};H.isContextProvider=function(e){return be(e)===Tr};H.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mt};H.isForwardRef=function(e){return be(e)===Fr};H.isFragment=function(e){return be(e)===Or};H.isLazy=function(e){return be(e)===Wr};H.isMemo=function(e){return be(e)===Gr};H.isPortal=function(e){return be(e)===ht};H.isProfiler=function(e){return be(e)===Br};H.isStrictMode=function(e){return be(e)===Rr};H.isSuspense=function(e){return be(e)===Lr};H.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Or||e===Br||e===Gi||e===Rr||e===Lr||e===en||e===Wi||typeof e=="object"&&e!==null&&(e.$$typeof===Wr||e.$$typeof===Gr||e.$$typeof===Tr||e.$$typeof===Mr||e.$$typeof===Fr||e.$$typeof===Li||e.$$typeof===Mi||e[0]===Fi)};H.typeOf=be;Ti.exports=H;var Hl=Ti.exports,Ul=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ql=["reactReduxForwardedRef"],Vl=[],zl=[null,null];function Jl(e,r){var t=e[1];return[r.payload,t+1]}function Ha(e,r,t){Ei(function(){return e.apply(void 0,r)},t)}function Kl(e,r,t,n,a,i,o){e.current=n,r.current=a,t.current=!1,i.current&&(i.current=null,o())}function Yl(e,r,t,n,a,i,o,s,c,p){if(e){var v=!1,d=null,u=function(){if(!v){var b=r.getState(),x,y;try{x=n(b,a.current)}catch(D){y=D,d=D}y||(d=null),x===i.current?o.current||c():(i.current=x,s.current=x,o.current=!0,p({type:"STORE_UPDATED",payload:{error:y}}))}};t.onStateChange=u,t.trySubscribe(),u();var g=function(){if(v=!0,t.tryUnsubscribe(),t.onStateChange=null,d)throw d};return g}}var Xl=function(){return[null,0]};function Ql(e,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,a=n===void 0?function(C){return"ConnectAdvanced("+C+")"}:n,i=t.methodName,o=i===void 0?"connectAdvanced":i,s=t.renderCountProp,c=s===void 0?void 0:s,p=t.shouldHandleStateChanges,v=p===void 0?!0:p,d=t.storeKey,u=d===void 0?"store":d;t.withRef;var g=t.forwardRef,h=g===void 0?!1:g,b=t.context,x=b===void 0?Ii:b,y=Qr(t,Ul),D=x;return function(f){var S=f.displayName||f.name||"Component",I=a(S),B=A({},y,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:v,storeKey:u,displayName:I,wrappedComponentName:S,WrappedComponent:f}),W=y.pure;function T(q){return e(q.dispatch,B)}var F=W?N.useMemo:function(q){return q()};function M(q){var re=N.useMemo(function(){var Se=q.reactReduxForwardedRef,ze=Qr(q,ql);return[q.context,Se,ze]},[q]),O=re[0],J=re[1],X=re[2],te=N.useMemo(function(){return O&&O.Consumer&&Hl.isContextConsumer(U.createElement(O.Consumer,null))?O:D},[O,D]),V=N.useContext(te),xe=!!q.store&&!!q.store.getState&&!!q.store.dispatch;V&&V.store;var oe=xe?q.store:V.store,Oe=N.useMemo(function(){return T(oe)},[oe]),$e=N.useMemo(function(){if(!v)return zl;var Se=Pi(oe,xe?null:V.subscription),ze=Se.notifyNestedSubs.bind(Se);return[Se,ze]},[oe,xe,V]),me=$e[0],Re=$e[1],Be=N.useMemo(function(){return xe?V:A({},V,{subscription:me})},[xe,V,me]),Te=N.useReducer(Jl,Vl,Xl),ke=Te[0],ye=ke[0],He=Te[1];if(ye&&ye.error)throw ye.error;var ir=N.useRef(),Ue=N.useRef(X),Me=N.useRef(),or=N.useRef(!1),qe=F(function(){return Me.current&&X===Ue.current?Me.current:Oe(oe.getState(),X)},[oe,ye,X]);Ha(Kl,[Ue,ir,or,X,qe,Me,Re]),Ha(Yl,[v,oe,me,Oe,Ue,ir,or,Me,Re,He],[oe,me,Oe]);var Ve=N.useMemo(function(){return U.createElement(f,A({},qe,{ref:J}))},[J,f,qe]),Hr=N.useMemo(function(){return v?U.createElement(te.Provider,{value:Be},Ve):Ve},[te,Ve,Be]);return Hr}var Q=W?U.memo(M):M;if(Q.WrappedComponent=f,Q.displayName=M.displayName=I,h){var ie=U.forwardRef(function(re,O){return U.createElement(Q,A({},re,{reactReduxForwardedRef:O}))});return ie.displayName=I,ie.WrappedComponent=f,ka(ie,f)}return ka(Q,f)}}function Ua(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function It(e,r){if(Ua(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!Object.prototype.hasOwnProperty.call(r,t[a])||!Ua(e[t[a]],r[t[a]]))return!1;return!0}function Zl(e,r){var t={},n=function(o){var s=e[o];typeof s=="function"&&(t[o]=function(){return r(s.apply(void 0,arguments))})};for(var a in e)n(a);return t}function rn(e){return function(t,n){var a=e(t,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function qa(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function $i(e,r){return function(n,a){a.displayName;var i=function(s,c){return i.dependsOnOwnProps?i.mapToProps(s,c):i.mapToProps(s)};return i.dependsOnOwnProps=!0,i.mapToProps=function(s,c){i.mapToProps=e,i.dependsOnOwnProps=qa(e);var p=i(s,c);return typeof p=="function"&&(i.mapToProps=p,i.dependsOnOwnProps=qa(p),p=i(s,c)),p},i}}function _l(e){return typeof e=="function"?$i(e):void 0}function es(e){return e?void 0:rn(function(r){return{dispatch:r}})}function rs(e){return e&&typeof e=="object"?rn(function(r){return Zl(e,r)}):void 0}const ts=[_l,es,rs];function ns(e){return typeof e=="function"?$i(e):void 0}function as(e){return e?void 0:rn(function(){return{}})}const is=[ns,as];function os(e,r,t){return A({},t,e,r)}function ls(e){return function(t,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,o=!1,s;return function(p,v,d){var u=e(p,v,d);return o?(!a||!i(u,s))&&(s=u):(o=!0,s=u),s}}}function ss(e){return typeof e=="function"?ls(e):void 0}function cs(e){return e?void 0:function(){return os}}const ds=[ss,cs];var us=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ps(e,r,t,n){return function(i,o){return t(e(i,o),r(n,o),o)}}function vs(e,r,t,n,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,s=a.areStatePropsEqual,c=!1,p,v,d,u,g;function h(C,f){return p=C,v=f,d=e(p,v),u=r(n,v),g=t(d,u,v),c=!0,g}function b(){return d=e(p,v),r.dependsOnOwnProps&&(u=r(n,v)),g=t(d,u,v),g}function x(){return e.dependsOnOwnProps&&(d=e(p,v)),r.dependsOnOwnProps&&(u=r(n,v)),g=t(d,u,v),g}function y(){var C=e(p,v),f=!s(C,d);return d=C,f&&(g=t(d,u,v)),g}function D(C,f){var S=!o(f,v),I=!i(C,p,f,v);return p=C,v=f,S&&I?b():S?x():I?y():g}return function(f,S){return c?D(f,S):h(f,S)}}function fs(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,a=r.initMergeProps,i=Qr(r,us),o=t(e,i),s=n(e,i),c=a(e,i),p=i.pure?vs:ps;return p(o,s,c,e,i)}var gs=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function jt(e,r,t){for(var n=r.length-1;n>=0;n--){var a=r[n](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+o.wrappedComponentName+".")}}function ms(e,r){return e===r}function hs(e){var r=e===void 0?{}:e,t=r.connectHOC,n=t===void 0?Ql:t,a=r.mapStateToPropsFactories,i=a===void 0?is:a,o=r.mapDispatchToPropsFactories,s=o===void 0?ts:o,c=r.mergePropsFactories,p=c===void 0?ds:c,v=r.selectorFactory,d=v===void 0?fs:v;return function(g,h,b,x){x===void 0&&(x={});var y=x,D=y.pure,C=D===void 0?!0:D,f=y.areStatesEqual,S=f===void 0?ms:f,I=y.areOwnPropsEqual,B=I===void 0?It:I,W=y.areStatePropsEqual,T=W===void 0?It:W,F=y.areMergedPropsEqual,M=F===void 0?It:F,Q=Qr(y,gs),ie=jt(g,i,"mapStateToProps"),q=jt(h,s,"mapDispatchToProps"),re=jt(b,p,"mergeProps");return n(d,A({methodName:"connect",getDisplayName:function(J){return"Connect("+J+")"},shouldHandleStateChanges:!!g,initMapStateToProps:ie,initMapDispatchToProps:q,initMergeProps:re,pure:C,areStatesEqual:S,areOwnPropsEqual:B,areStatePropsEqual:T,areMergedPropsEqual:M},Q))}}const ki=hs();fl(Uo.unstable_batchedUpdates);function bs(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Hi(e,r){var t=N.useState(function(){return{inputs:r,result:e()}})[0],n=N.useRef(!0),a=N.useRef(t),i=n.current||!!(r&&a.current.inputs&&bs(r,a.current.inputs)),o=i?a.current:{inputs:r,result:e()};return N.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function xs(e,r){return Hi(function(){return e},r)}var G=Hi,P=xs,ys="Invariant failed";function Ds(e,r){throw new Error(ys)}var he=function(r){var t=r.top,n=r.right,a=r.bottom,i=r.left,o=n-i,s=a-t,c={top:t,right:n,bottom:a,left:i,width:o,height:s,x:i,y:t,center:{x:(n+i)/2,y:(a+t)/2}};return c},tn=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},Va=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},Ss=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Pt={top:0,right:0,bottom:0,left:0},nn=function(r){var t=r.borderBox,n=r.margin,a=n===void 0?Pt:n,i=r.border,o=i===void 0?Pt:i,s=r.padding,c=s===void 0?Pt:s,p=he(tn(t,a)),v=he(Va(t,o)),d=he(Va(v,c));return{marginBox:p,borderBox:he(t),paddingBox:v,contentBox:d,margin:a,border:o,padding:c}},ve=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var a=Number(t);return isNaN(a)&&Ds(),a},ws=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Zr=function(r,t){var n=r.borderBox,a=r.border,i=r.margin,o=r.padding,s=Ss(n,t);return nn({borderBox:s,border:a,margin:i,padding:o})},_r=function(r,t){return t===void 0&&(t=ws()),Zr(r,t)},Ui=function(r,t){var n={top:ve(t.marginTop),right:ve(t.marginRight),bottom:ve(t.marginBottom),left:ve(t.marginLeft)},a={top:ve(t.paddingTop),right:ve(t.paddingRight),bottom:ve(t.paddingBottom),left:ve(t.paddingLeft)},i={top:ve(t.borderTopWidth),right:ve(t.borderRightWidth),bottom:ve(t.borderBottomWidth),left:ve(t.borderLeftWidth)};return nn({borderBox:r,margin:n,padding:a,border:i})},qi=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return Ui(t,n)},za=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function Cs(e,r){return!!(e===r||za(e)&&za(r))}function Ns(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!Cs(e[t],r[t]))return!1;return!0}function Z(e,r){r===void 0&&(r=Ns);var t,n=[],a,i=!1;function o(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i&&t===this&&r(s,n)||(a=e.apply(this,s),i=!0,t=this,n=s),a}return o}var Ir=function(r){var t=[],n=null,a=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];t=s,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function Vi(e,r){}Vi.bind(null,"warn");Vi.bind(null,"error");function Ie(){}function Is(e,r){return A({},e,{},r)}function fe(e,r,t){var n=r.map(function(a){var i=Is(t,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var js="Invariant failed";function et(e){this.message=e}et.prototype.toString=function(){return this.message};function w(e,r){throw new et(js)}var Ps=function(e){wi(r,e);function r(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.callbacks=null,n.unbind=Ie,n.onWindowError=function(s){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var p=s.error;p instanceof et&&s.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(s){n.callbacks=s},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=fe(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(a){if(a instanceof et){this.setState({});return}throw a},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}(U.Component),Es=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,rt=function(r){return r+1},As=function(r){return`
  You have lifted an item in position `+rt(r.source.index)+`
`},zi=function(r,t){var n=r.droppableId===t.droppableId,a=rt(r.index),i=rt(t.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+i+`
  `},Ji=function(r,t,n){var a=t.droppableId===n.droppableId;return a?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},Os=function(r){var t=r.destination;if(t)return zi(r.source,t);var n=r.combine;return n?Ji(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},Ja=function(r){return`
  The item has returned to its starting position
  of `+rt(r.index)+`
`},Rs=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+Ja(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+zi(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+Ji(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ja(r.source)+`
  `},Yr={dragHandleUsageInstructions:Es,onDragStart:As,onDragUpdate:Os,onDragEnd:Rs},_={x:0,y:0},ae=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},ce=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},je=function(r,t){return r.x===t.x&&r.y===t.y},tr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},We=function(r,t,n){var a;return n===void 0&&(n=0),a={},a[r]=t,a[r==="x"?"y":"x"]=n,a},jr=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},Ka=function(r,t){return Math.min.apply(Math,t.map(function(n){return jr(r,n)}))},Ki=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},Bs=function(e,r){var t=he({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t},$r=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Ya=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},Ts={top:0,right:0,bottom:0,left:0},Ms=function(r,t){return t?$r(r,t.scroll.diff.displacement):r},Fs=function(r,t,n){if(n&&n.increasedBy){var a;return A({},r,(a={},a[t.end]=r[t.end]+n.increasedBy[t.line],a))}return r},Ls=function(r,t){return t&&t.shouldClipSubject?Bs(t.pageMarginBox,r):he(r)},_e=function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,a=e.frame,i=Ms(r.marginBox,a),o=Fs(i,n,t),s=Ls(o,a);return{page:r,withPlaceholder:t,active:s}},an=function(e,r){e.frame||w();var t=e.frame,n=ce(r,t.scroll.initial),a=tr(n),i=A({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:a},max:t.scroll.max}}),o=_e({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),s=A({},e,{frame:i,subject:o});return s};function tt(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function on(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function Ae(e,r){if(e.find)return e.find(r);var t=on(e,r);if(t!==-1)return e[t]}function Yi(e){return Array.prototype.slice.call(e)}var Xi=Z(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Qi=Z(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),bt=Z(function(e){return tt(e)}),Gs=Z(function(e){return tt(e)}),nr=Z(function(e,r){var t=Gs(r).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return t});function ln(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function xt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var yt=Z(function(e,r){return r.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),Ws=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;var o=ln(i);if(!o)return null;function s(b){var x={type:"COMBINE",combine:{draggableId:b,droppableId:n.descriptor.id}};return A({},i,{at:x})}var c=i.displaced.all,p=c.length?c[0]:null;if(r)return p?s(p):null;var v=yt(t,a);if(!p){if(!v.length)return null;var d=v[v.length-1];return s(d.descriptor.id)}var u=on(v,function(b){return b.descriptor.id===p});u===-1&&w();var g=u-1;if(g<0)return null;var h=v[g];return s(h.descriptor.id)},ar=function(e,r){return e.descriptor.droppableId===r.descriptor.id},Zi={point:_,value:0},Pr={invisible:{},visible:{},all:[]},$s={displaced:Pr,displacedBy:Zi,at:null},ge=function(e,r){return function(t){return e<=t&&t<=r}},_i=function(e){var r=ge(e.top,e.bottom),t=ge(e.left,e.right);return function(n){var a=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(a)return!0;var i=r(n.top)||r(n.bottom),o=t(n.left)||t(n.right),s=i&&o;if(s)return!0;var c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right,v=c&&p;if(v)return!0;var d=c&&o||p&&i;return d}},ks=function(e){var r=ge(e.top,e.bottom),t=ge(e.left,e.right);return function(n){var a=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return a}},sn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},eo={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Hs=function(e){return function(r){var t=ge(r.top,r.bottom),n=ge(r.left,r.right);return function(a){return e===sn?t(a.top)&&t(a.bottom):n(a.left)&&n(a.right)}}},Us=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:_;return $r(r,n)},qs=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},Vs=function(r,t,n){return n(t)(r)},cn=function(r){var t=r.target,n=r.destination,a=r.viewport,i=r.withDroppableDisplacement,o=r.isVisibleThroughFrameFn,s=i?Us(t,n):t;return qs(s,n,o)&&Vs(s,a,o)},zs=function(r){return cn(A({},r,{isVisibleThroughFrameFn:_i}))},ro=function(r){return cn(A({},r,{isVisibleThroughFrameFn:ks}))},Js=function(r){return cn(A({},r,{isVisibleThroughFrameFn:Hs(r.destination.axis)}))},Ks=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var a=t.invisible,i=t.visible;if(a[r])return!1;var o=i[r];return o?o.shouldAnimate:!0};function Ys(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return he(tn(t,n))}function Er(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return r.reduce(function(c,p){var v=Ys(p,n),d=p.descriptor.id;c.all.push(d);var u=zs({target:v,destination:t,viewport:a,withDroppableDisplacement:!0});if(!u)return c.invisible[p.descriptor.id]=!0,c;var g=Ks(d,o,i),h={draggableId:d,shouldAnimate:g};return c.visible[d]=h,c},{all:[],visible:{},invisible:{}})}function Xs(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}function Xa(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,a=e.destination,i=Xs(r,{inHomeList:t});return{displaced:Pr,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function nt(e){var r=e.draggable,t=e.insideDestination,n=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,c=e.forceShouldAnimate,p=ar(r,n);if(s==null)return Xa({insideDestination:t,inHomeList:p,displacedBy:i,destination:n});var v=Ae(t,function(b){return b.descriptor.index===s});if(!v)return Xa({insideDestination:t,inHomeList:p,displacedBy:i,destination:n});var d=yt(r,t),u=t.indexOf(v),g=d.slice(u),h=Er({afterDragging:g,destination:n,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:h,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function Ee(e,r){return!!r.effected[e]}var Qs=function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,a=e.combine,i=e.afterCritical;if(!t.isCombineEnabled)return null;var o=a.draggableId,s=n[o],c=s.descriptor.index,p=Ee(o,i);return p?r?c:c-1:r?c+1:c},Zs=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var i=a.index,o=r?i+1:i-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index,p=t?c:c+1;return o<s||o>p?null:o},_s=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,c=e.viewport,p=e.afterCritical,v=s.at;if(v||w(),v.type==="REORDER"){var d=Zs({isMovingForward:r,isInHomeList:t,location:v.destination,insideDestination:o});return d==null?null:nt({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})}var u=Qs({isMovingForward:r,destination:i,displaced:s.displaced,draggables:a,combine:v.combine,afterCritical:p});return u==null?null:nt({draggable:n,insideDestination:o,destination:i,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:u})},ec=function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,a=e.displacedBy,i=!!(r.visible[n]||r.invisible[n]);return Ee(n,t)?i?_:tr(a.point):i?a.point:_},rc=function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,a=xt(t);a||w();var i=a.draggableId,o=n[i].page.borderBox.center,s=ec({displaced:t.displaced,afterCritical:r,combineWith:i,displacedBy:t.displacedBy});return ae(o,s)},to=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},tc=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},dn=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},Qa=function(r){var t=r.axis,n=r.moveRelativeTo,a=r.isMoving;return We(t.line,n.marginBox[t.end]+to(t,a),dn(t,n.marginBox,a))},Za=function(r){var t=r.axis,n=r.moveRelativeTo,a=r.isMoving;return We(t.line,n.marginBox[t.start]-tc(t,a),dn(t,n.marginBox,a))},nc=function(r){var t=r.axis,n=r.moveInto,a=r.isMoving;return We(t.line,n.contentBox[t.start]+to(t,a),dn(t,n.contentBox,a))},ac=function(e){var r=e.impact,t=e.draggable,n=e.draggables,a=e.droppable,i=e.afterCritical,o=nr(a.descriptor.id,n),s=t.page,c=a.axis;if(!o.length)return nc({axis:c,moveInto:a.page,isMoving:s});var p=r.displaced,v=r.displacedBy,d=p.all[0];if(d){var u=n[d];if(Ee(d,i))return Za({axis:c,moveRelativeTo:u.page,isMoving:s});var g=Zr(u.page,v.point);return Za({axis:c,moveRelativeTo:g,isMoving:s})}var h=o[o.length-1];if(h.descriptor.id===t.descriptor.id)return s.borderBox.center;if(Ee(h.descriptor.id,i)){var b=Zr(h.page,tr(i.displacedBy.point));return Qa({axis:c,moveRelativeTo:b,isMoving:s})}return Qa({axis:c,moveRelativeTo:h.page,isMoving:s})},Gt=function(e,r){var t=e.frame;return t?ae(r,t.scroll.diff.displacement):r},ic=function(r){var t=r.impact,n=r.draggable,a=r.droppable,i=r.draggables,o=r.afterCritical,s=n.page.borderBox.center,c=t.at;return!a||!c?s:c.type==="REORDER"?ac({impact:t,draggable:n,draggables:i,droppable:a,afterCritical:o}):rc({impact:t,draggables:i,afterCritical:o})},Dt=function(e){var r=ic(e),t=e.droppable,n=t?Gt(t,r):r;return n},no=function(e,r){var t=ce(r,e.scroll.initial),n=tr(t),a=he({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}};return i};function _a(e,r){return e.map(function(t){return r[t]})}function oc(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}var lc=function(e){var r=e.impact,t=e.viewport,n=e.destination,a=e.draggables,i=e.maxScrollChange,o=no(t,ae(t.scroll.current,i)),s=n.frame?an(n,ae(n.frame.scroll.current,i)):n,c=r.displaced,p=Er({afterDragging:_a(c.all,a),destination:n,displacedBy:r.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),v=Er({afterDragging:_a(c.all,a),destination:s,displacedBy:r.displacedBy,viewport:t.frame,last:c,forceShouldAnimate:!1}),d={},u={},g=[c,p,v];c.all.forEach(function(b){var x=oc(b,g);if(x){u[b]=x;return}d[b]=!0});var h=A({},r,{displaced:{all:c.all,invisible:d,visible:u}});return h},sc=function(e,r){return ae(e.scroll.diff.displacement,r)},un=function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=e.viewport,a=sc(n,r),i=ce(a,t.page.borderBox.center);return ae(t.client.borderBox.center,i)},ao=function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=o===void 0?!1:o,c=ce(n,r.page.borderBox.center),p=$r(r.page.borderBox,c),v={target:p,destination:t,withDroppableDisplacement:i,viewport:a};return s?Js(v):ro(v)},cc=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,p=e.afterCritical;if(!n.isEnabled)return null;var v=nr(n.descriptor.id,a),d=ar(t,n),u=Ws({isMovingForward:r,draggable:t,destination:n,insideDestination:v,previousImpact:i})||_s({isMovingForward:r,isInHomeList:d,draggable:t,draggables:a,destination:n,insideDestination:v,previousImpact:i,viewport:o,afterCritical:p});if(!u)return null;var g=Dt({impact:u,draggable:t,droppable:n,draggables:a,afterCritical:p}),h=ao({draggable:t,destination:n,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(h){var b=un({pageBorderBoxCenter:g,draggable:t,viewport:o});return{clientSelection:b,impact:u,scrollJumpRequest:null}}var x=ce(g,s),y=lc({impact:u,viewport:o,destination:n,draggables:a,maxScrollChange:x});return{clientSelection:c,impact:y,scrollJumpRequest:x}},le=function(r){var t=r.subject.active;return t||w(),t},dc=function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,a=e.droppables,i=e.viewport,o=n.subject.active;if(!o)return null;var s=n.axis,c=ge(o[s.start],o[s.end]),p=bt(a).filter(function(d){return d!==n}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return _i(i.frame)(le(d))}).filter(function(d){var u=le(d);return r?o[s.crossAxisEnd]<u[s.crossAxisEnd]:u[s.crossAxisStart]<o[s.crossAxisStart]}).filter(function(d){var u=le(d),g=ge(u[s.start],u[s.end]);return c(u[s.start])||c(u[s.end])||g(o[s.start])||g(o[s.end])}).sort(function(d,u){var g=le(d)[s.crossAxisStart],h=le(u)[s.crossAxisStart];return r?g-h:h-g}).filter(function(d,u,g){return le(d)[s.crossAxisStart]===le(g[0])[s.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var v=p.filter(function(d){var u=ge(le(d)[s.start],le(d)[s.end]);return u(t[s.line])});return v.length===1?v[0]:v.length>1?v.sort(function(d,u){return le(d)[s.start]-le(u)[s.start]})[0]:p.sort(function(d,u){var g=Ka(t,Ya(le(d))),h=Ka(t,Ya(le(u)));return g!==h?g-h:le(d)[s.start]-le(u)[s.start]})[0]},ei=function(r,t){var n=r.page.borderBox.center;return Ee(r.descriptor.id,t)?ce(n,t.displacedBy.point):n},uc=function(r,t){var n=r.page.borderBox;return Ee(r.descriptor.id,t)?$r(n,tr(t.displacedBy.point)):n},pc=function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(s){return ro({target:uc(s,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(s,c){var p=jr(r,Gt(n,ei(s,i))),v=jr(r,Gt(n,ei(c,i)));return p<v?-1:v<p?1:s.descriptor.index-c.descriptor.index});return o[0]||null},kr=Z(function(r,t){var n=t[r.line];return{value:n,point:We(r.line,n)}}),vc=function(r,t,n){var a=r.axis;if(r.descriptor.mode==="virtual")return We(a.line,t[a.line]);var i=r.subject.page.contentBox[a.size],o=nr(r.descriptor.id,n),s=o.reduce(function(v,d){return v+d.client.marginBox[a.size]},0),c=s+t[a.line],p=c-i;return p<=0?null:We(a.line,p)},io=function(r,t){return A({},r,{scroll:A({},r.scroll,{max:t})})},oo=function(r,t,n){var a=r.frame;ar(t,r)&&w(),r.subject.withPlaceholder&&w();var i=kr(r.axis,t.displaceBy).point,o=vc(r,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!a){var c=_e({page:r.subject.page,withPlaceholder:s,axis:r.axis,frame:r.frame});return A({},r,{subject:c})}var p=o?ae(a.scroll.max,o):a.scroll.max,v=io(a,p),d=_e({page:r.subject.page,withPlaceholder:s,axis:r.axis,frame:v});return A({},r,{subject:d,frame:v})},fc=function(r){var t=r.subject.withPlaceholder;t||w();var n=r.frame;if(!n){var a=_e({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return A({},r,{subject:a})}var i=t.oldFrameMaxScroll;i||w();var o=io(n,i),s=_e({page:r.subject.page,axis:r.axis,frame:o,withPlaceholder:null});return A({},r,{subject:s,frame:o})},gc=function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,c=e.afterCritical;if(!t){if(n.length)return null;var p={displaced:Pr,displacedBy:Zi,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},v=Dt({impact:p,draggable:a,droppable:o,draggables:i,afterCritical:c}),d=ar(a,o)?o:oo(o,a,i),u=ao({draggable:a,destination:d,newPageBorderBoxCenter:v,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return u?p:null}var g=r[o.axis.line]<=t.page.borderBox.center[o.axis.line],h=function(){var x=t.descriptor.index;return t.descriptor.id===a.descriptor.id||g?x:x+1}(),b=kr(o.axis,a.displaceBy);return nt({draggable:a,insideDestination:n,destination:o,viewport:s,displacedBy:b,last:Pr,index:h})},mc=function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,c=e.afterCritical,p=dc({isMovingForward:r,pageBorderBoxCenter:t,source:a,droppables:o,viewport:s});if(!p)return null;var v=nr(p.descriptor.id,i),d=pc({pageBorderBoxCenter:t,viewport:s,destination:p,insideDestination:v,afterCritical:c}),u=gc({previousPageBorderBoxCenter:t,destination:p,draggable:n,draggables:i,moveRelativeTo:d,insideDestination:v,viewport:s,afterCritical:c});if(!u)return null;var g=Dt({impact:u,draggable:n,droppable:p,draggables:i,afterCritical:c}),h=un({pageBorderBoxCenter:g,draggable:n,viewport:s});return{clientSelection:h,impact:u,scrollJumpRequest:null}},de=function(e){var r=e.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},hc=function(r,t){var n=de(r);return n?t[n]:null},bc=function(e){var r=e.state,t=e.type,n=hc(r.impact,r.dimensions.droppables),a=!!n,i=r.dimensions.droppables[r.critical.droppable.id],o=n||i,s=o.axis.direction,c=s==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||s==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(c&&!a)return null;var p=t==="MOVE_DOWN"||t==="MOVE_RIGHT",v=r.dimensions.draggables[r.critical.draggable.id],d=r.current.page.borderBoxCenter,u=r.dimensions,g=u.draggables,h=u.droppables;return c?cc({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:v,destination:o,draggables:g,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):mc({isMovingForward:p,previousPageBorderBoxCenter:d,draggable:v,isOver:o,draggables:g,droppables:h,viewport:r.viewport,afterCritical:r.afterCritical})};function Le(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function lo(e){var r=ge(e.top,e.bottom),t=ge(e.left,e.right);return function(a){return r(a.y)&&t(a.x)}}function xc(e,r){return e.left<r.right&&e.right>r.left&&e.top<r.bottom&&e.bottom>r.top}function yc(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,a=t.page.borderBox.center,i=n.map(function(o){var s=o.axis,c=We(o.axis.line,r.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:jr(a,c)}}).sort(function(o,s){return s.distance-o.distance});return i[0]?i[0].id:null}function Dc(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,a=bt(n).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!xc(r,o))return!1;if(lo(o)(r.center))return!0;var s=i.axis,c=o.center[s.crossAxisLine],p=r[s.crossAxisStart],v=r[s.crossAxisEnd],d=ge(o[s.crossAxisStart],o[s.crossAxisEnd]),u=d(p),g=d(v);return!u&&!g?!0:u?p<c:v>c});return a.length?a.length===1?a[0].descriptor.id:yc({pageBorderBox:r,draggable:t,candidates:a}):null}var so=function(r,t){return he($r(r,t))},Sc=function(e,r){var t=e.frame;return t?so(r,t.scroll.diff.value):r};function co(e){var r=e.displaced,t=e.id;return!!(r.visible[t]||r.invisible[t])}function wc(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Cc=function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,c=n.axis,p=kr(n.axis,t.displaceBy),v=p.value,d=r[c.start],u=r[c.end],g=yt(t,a),h=Ae(g,function(x){var y=x.descriptor.id,D=x.page.borderBox.center[c.line],C=Ee(y,s),f=co({displaced:i,id:y});return C?f?u<=D:d<D-v:f?u<=D+v:d<D}),b=wc({draggable:t,closest:h,inHomeList:ar(t,n)});return nt({draggable:t,insideDestination:a,destination:n,viewport:o,last:i,displacedBy:p,index:b})},Nc=4,Ic=function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,c=kr(a.axis,r.displaceBy),p=c.value,v=t[s.start],d=t[s.end],u=yt(r,i),g=Ae(u,function(b){var x=b.descriptor.id,y=b.page.borderBox,D=y[s.size],C=D/Nc,f=Ee(x,o),S=co({displaced:n.displaced,id:x});return f?S?d>y[s.start]+C&&d<y[s.end]-C:v>y[s.start]-p+C&&v<y[s.end]-p-C:S?d>y[s.start]+p+C&&d<y[s.end]+p-C:v>y[s.start]+C&&v<y[s.end]-C});if(!g)return null;var h={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:a.descriptor.id}}};return h},uo=function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,c=so(t.page.borderBox,r),p=Dc({pageBorderBox:c,draggable:t,droppables:a});if(!p)return $s;var v=a[p],d=nr(v.descriptor.id,n),u=Sc(v,c);return Ic({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:i,destination:v,insideDestination:d,afterCritical:s})||Cc({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:v,insideDestination:d,last:i.displaced,viewport:o,afterCritical:s})},pn=function(e,r){var t;return A({},e,(t={},t[r.descriptor.id]=r,t))},jc=function(r){var t=r.previousImpact,n=r.impact,a=r.droppables,i=de(t),o=de(n);if(!i||i===o)return a;var s=a[i];if(!s.subject.withPlaceholder)return a;var c=fc(s);return pn(a,c)},Pc=function(e){var r=e.draggable,t=e.draggables,n=e.droppables,a=e.previousImpact,i=e.impact,o=jc({previousImpact:a,impact:i,droppables:n}),s=de(i);if(!s)return o;var c=n[s];if(ar(r,c)||c.subject.withPlaceholder)return o;var p=oo(c,r,t);return pn(o,p)},wr=function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||r.viewport,c=n||r.dimensions,p=t||r.current.client.selection,v=ce(p,r.initial.client.selection),d={offset:v,selection:p,borderBoxCenter:ae(r.initial.client.borderBoxCenter,v)},u={selection:ae(d.selection,s.scroll.current),borderBoxCenter:ae(d.borderBoxCenter,s.scroll.current),offset:ae(d.offset,s.scroll.diff.value)},g={client:d,page:u};if(r.phase==="COLLECTING")return A({phase:"COLLECTING"},r,{dimensions:c,viewport:s,current:g});var h=c.draggables[r.critical.draggable.id],b=i||uo({pageOffset:u.offset,draggable:h,draggables:c.draggables,droppables:c.droppables,previousImpact:r.impact,viewport:s,afterCritical:r.afterCritical}),x=Pc({draggable:h,impact:b,previousImpact:r.impact,draggables:c.draggables,droppables:c.droppables}),y=A({},r,{current:g,dimensions:{draggables:c.draggables,droppables:x},impact:b,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return y};function Ec(e,r){return e.map(function(t){return r[t]})}var po=function(e){var r=e.impact,t=e.viewport,n=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=r.displaced,s=Ec(o.all,n),c=Er({afterDragging:s,destination:a,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:o});return A({},r,{displaced:c})},vo=function(e){var r=e.impact,t=e.draggable,n=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=Dt({impact:r,draggable:t,draggables:a,droppable:n,afterCritical:o});return un({pageBorderBoxCenter:s,draggable:t,viewport:i})},fo=function(e){var r=e.state,t=e.dimensions,n=e.viewport;r.movementMode!=="SNAP"&&w();var a=r.impact,i=n||r.viewport,o=t||r.dimensions,s=o.draggables,c=o.droppables,p=s[r.critical.draggable.id],v=de(a);v||w();var d=c[v],u=po({impact:a,viewport:i,destination:d,draggables:s}),g=vo({impact:u,draggable:p,droppable:d,draggables:s,viewport:i,afterCritical:r.afterCritical});return wr({impact:u,clientSelection:g,state:r,dimensions:o,viewport:i})},Ac=function(e){return{index:e.index,droppableId:e.droppableId}},go=function(e){var r=e.draggable,t=e.home,n=e.draggables,a=e.viewport,i=kr(t.axis,r.displaceBy),o=nr(t.descriptor.id,n),s=o.indexOf(r);s===-1&&w();var c=o.slice(s+1),p=c.reduce(function(g,h){return g[h.descriptor.id]=!0,g},{}),v={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:p},d=Er({afterDragging:c,destination:t,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),u={displaced:d,displacedBy:i,at:{type:"REORDER",destination:Ac(r.descriptor)}};return{impact:u,afterCritical:v}},Oc=function(e,r){return{draggables:e.draggables,droppables:pn(e.droppables,r)}},Rc=function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,a=Zr(r.client,t),i=_r(a,n),o=A({},r,{placeholder:A({},r.placeholder,{client:a}),client:a,page:i});return o},Bc=function(e){var r=e.frame;return r||w(),r},Tc=function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return r.map(function(i){var o=i.descriptor.droppableId,s=t[o],c=Bc(s),p=c.scroll.diff.value,v=ae(a,p),d=Rc({draggable:i,offset:v,initialWindowScroll:n.scroll.initial});return d})},Mc=function(e){var r=e.state,t=e.published,n=t.modified.map(function(C){var f=r.dimensions.droppables[C.droppableId],S=an(f,C.scroll);return S}),a=A({},r.dimensions.droppables,{},Xi(n)),i=Qi(Tc({additions:t.additions,updatedDroppables:a,viewport:r.viewport})),o=A({},r.dimensions.draggables,{},i);t.removals.forEach(function(C){delete o[C]});var s={droppables:a,draggables:o},c=de(r.impact),p=c?s.droppables[c]:null,v=s.draggables[r.critical.draggable.id],d=s.droppables[r.critical.droppable.id],u=go({draggable:v,home:d,draggables:o,viewport:r.viewport}),g=u.impact,h=u.afterCritical,b=p&&p.isCombineEnabled?r.impact:g,x=uo({pageOffset:r.current.page.offset,draggable:s.draggables[r.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:b,viewport:r.viewport,afterCritical:h}),y=A({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:x,onLiftImpact:g,dimensions:s,afterCritical:h,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return y;var D=A({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return D},Wt=function(r){return r.movementMode==="SNAP"},Et=function(r,t,n){var a=Oc(r.dimensions,t);return!Wt(r)||n?wr({state:r,dimensions:a}):fo({state:r,dimensions:a})};function At(e){return e.isDragging&&e.movementMode==="SNAP"?A({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ri={phase:"IDLE",completed:null,shouldFlush:!1},Fc=function(e,r){if(e===void 0&&(e=ri),r.type==="FLUSH")return A({},ri,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&w();var t=r.payload,n=t.critical,a=t.clientSelection,i=t.viewport,o=t.dimensions,s=t.movementMode,c=o.draggables[n.draggable.id],p=o.droppables[n.droppable.id],v={selection:a,borderBoxCenter:c.client.borderBox.center,offset:_},d={client:v,page:{selection:ae(v.selection,i.scroll.initial),borderBoxCenter:ae(v.selection,i.scroll.initial),offset:ae(v.selection,i.scroll.diff.value)}},u=bt(o.droppables).every(function(He){return!He.isFixedOnPage}),g=go({draggable:c,home:p,draggables:o.draggables,viewport:i}),h=g.impact,b=g.afterCritical,x={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:o,initial:d,current:d,isWindowScrollAllowed:u,impact:h,afterCritical:b,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return x}if(r.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&w();var y=A({phase:"COLLECTING"},e,{phase:"COLLECTING"});return y}if(r.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||w(),Mc({state:e,published:r.payload});if(r.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Le(e)||w();var D=r.payload.client;return je(D,e.current.client.selection)?e:wr({state:e,clientSelection:D,impact:Wt(e)?e.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return At(e);Le(e)||w();var C=r.payload,f=C.id,S=C.newScroll,I=e.dimensions.droppables[f];if(!I)return e;var B=an(I,S);return Et(e,B,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Le(e)||w();var W=r.payload,T=W.id,F=W.isEnabled,M=e.dimensions.droppables[T];M||w(),M.isEnabled===F&&w();var Q=A({},M,{isEnabled:F});return Et(e,Q,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Le(e)||w();var ie=r.payload,q=ie.id,re=ie.isCombineEnabled,O=e.dimensions.droppables[q];O||w(),O.isCombineEnabled===re&&w();var J=A({},O,{isCombineEnabled:re});return Et(e,J,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Le(e)||w(),e.isWindowScrollAllowed||w();var X=r.payload.newScroll;if(je(e.viewport.scroll.current,X))return At(e);var te=no(e.viewport,X);return Wt(e)?fo({state:e,viewport:te}):wr({state:e,viewport:te})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Le(e))return e;var V=r.payload.maxScroll;if(je(V,e.viewport.scroll.max))return e;var xe=A({},e.viewport,{scroll:A({},e.viewport.scroll,{max:V})});return A({phase:"DRAGGING"},e,{viewport:xe})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&w();var oe=bc({state:e,type:r.type});return oe?wr({state:e,impact:oe.impact,clientSelection:oe.clientSelection,scrollJumpRequest:oe.scrollJumpRequest}):e}if(r.type==="DROP_PENDING"){var Oe=r.payload.reason;e.phase!=="COLLECTING"&&w();var $e=A({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Oe});return $e}if(r.type==="DROP_ANIMATE"){var me=r.payload,Re=me.completed,Be=me.dropDuration,Te=me.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||w();var ke={phase:"DROP_ANIMATING",completed:Re,dropDuration:Be,newHomeClientOffset:Te,dimensions:e.dimensions};return ke}if(r.type==="DROP_COMPLETE"){var ye=r.payload.completed;return{phase:"IDLE",completed:ye,shouldFlush:!1}}return e},Lc=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},Gc=function(r){return{type:"LIFT",payload:r}},Wc=function(r){return{type:"INITIAL_PUBLISH",payload:r}},$c=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},kc=function(){return{type:"COLLECTION_STARTING",payload:null}},Hc=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},Uc=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},qc=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},mo=function(r){return{type:"MOVE",payload:r}},Vc=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},zc=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},Jc=function(){return{type:"MOVE_UP",payload:null}},Kc=function(){return{type:"MOVE_DOWN",payload:null}},Yc=function(){return{type:"MOVE_RIGHT",payload:null}},Xc=function(){return{type:"MOVE_LEFT",payload:null}},vn=function(){return{type:"FLUSH",payload:null}},Qc=function(r){return{type:"DROP_ANIMATE",payload:r}},fn=function(r){return{type:"DROP_COMPLETE",payload:r}},ho=function(r){return{type:"DROP",payload:r}},Zc=function(r){return{type:"DROP_PENDING",payload:r}},bo=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},_c=function(e){return function(r){var t=r.getState,n=r.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,s=o.id,c=o.clientSelection,p=o.movementMode,v=t();v.phase==="DROP_ANIMATING"&&n(fn({completed:v.completed})),t().phase!=="IDLE"&&w(),n(vn()),n(Lc({draggableId:s,movementMode:p}));var d={shouldPublishImmediately:p==="SNAP"},u={draggableId:s,scrollOptions:d},g=e.startPublishing(u),h=g.critical,b=g.dimensions,x=g.viewport;n(Wc({critical:h,dimensions:b,clientSelection:c,movementMode:p,viewport:x}))}}}},ed=function(e){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&e.dragging(),t.type==="DROP_ANIMATE"&&e.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&e.resting(),r(t)}}}},gn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ar={opacity:{drop:0,combining:.7},scale:{drop:.75}},mn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fe=mn.outOfTheWay+"s "+gn.outOfTheWay,Cr={fluid:"opacity "+Fe,snap:"transform "+Fe+", opacity "+Fe,drop:function(r){var t=r+"s "+gn.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Fe,placeholder:"height "+Fe+", width "+Fe+", margin "+Fe},ti=function(r){return je(r,_)?null:"translate("+r.x+"px, "+r.y+"px)"},$t={moveTo:ti,drop:function(r,t){var n=ti(r);return n?t?n+" scale("+Ar.scale.drop+")":n:null}},kt=mn.minDropTime,xo=mn.maxDropTime,rd=xo-kt,ni=1500,td=.6,nd=function(e){var r=e.current,t=e.destination,n=e.reason,a=jr(r,t);if(a<=0)return kt;if(a>=ni)return xo;var i=a/ni,o=kt+rd*i,s=n==="CANCEL"?o*td:o;return Number(s.toFixed(2))},ad=function(e){var r=e.impact,t=e.draggable,n=e.dimensions,a=e.viewport,i=e.afterCritical,o=n.draggables,s=n.droppables,c=de(r),p=c?s[c]:null,v=s[t.descriptor.droppableId],d=vo({impact:r,draggable:t,draggables:o,afterCritical:i,droppable:p||v,viewport:a}),u=ce(d,t.client.borderBox.center);return u},id=function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!n.at||t!=="DROP"){var s=po({draggables:r,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=A({},n,{displaced:Pr});return{impact:c,didDropInsideDroppable:!0}},od=function(e){var r=e.getState,t=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=r(),o=a.payload.reason;if(i.phase==="COLLECTING"){t(Zc({reason:o}));return}if(i.phase!=="IDLE"){var s=i.phase==="DROP_PENDING"&&i.isWaiting;s&&w(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||w();var c=i.critical,p=i.dimensions,v=p.draggables[i.critical.draggable.id],d=id({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=d.impact,g=d.didDropInsideDroppable,h=g?ln(u):null,b=g?xt(u):null,x={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:v.descriptor.id,type:v.descriptor.type,source:x,reason:o,mode:i.movementMode,destination:h,combine:b},D=ad({impact:u,draggable:v,dimensions:p,viewport:i.viewport,afterCritical:i.afterCritical}),C={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:u},f=!je(i.current.client.offset,D)||!!y.combine;if(!f){t(fn({completed:C}));return}var S=nd({current:i.current.client.offset,destination:D,reason:o}),I={newHomeClientOffset:D,dropDuration:S,completed:C};t(Qc(I))}}}},yo=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function ld(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function sd(e){var r=e.onWindowScroll;function t(){r(yo())}var n=Ir(t),a=ld(n),i=Ie;function o(){return i!==Ie}function s(){o()&&w(),i=fe(window,[a])}function c(){o()||w(),n.cancel(),i(),i=Ie}return{start:s,stop:c,isActive:o}}var cd=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},dd=function(e){var r=sd({onWindowScroll:function(n){e.dispatch(Vc({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&cd(n)&&r.stop(),t(n)}}},ud=function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),a=function(o){r||t||(r=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return r},a},pd=function(){var e=[],r=function(i){var o=on(e,function(p){return p.timerId===i});o===-1&&w();var s=e.splice(o,1),c=s[0];c.callback()},t=function(i){var o=setTimeout(function(){return r(o)}),s={timerId:o,callback:i};e.push(s)},n=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:t,flush:n}},vd=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},fd=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},gd=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,a=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&a},br=function(r,t){t()},Vr=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},Ot=function(r,t,n,a){if(!r){n(a(t));return}var i=ud(n),o={announce:i};r(t,o),i.wasCalled()||n(a(t))},md=function(e,r){var t=pd(),n=null,a=function(u,g){n&&w(),br("onBeforeCapture",function(){var h=e().onBeforeCapture;if(h){var b={draggableId:u,mode:g};h(b)}})},i=function(u,g){n&&w(),br("onBeforeDragStart",function(){var h=e().onBeforeDragStart;h&&h(Vr(u,g))})},o=function(u,g){n&&w();var h=Vr(u,g);n={mode:g,lastCritical:u,lastLocation:h.source,lastCombine:null},t.add(function(){br("onDragStart",function(){return Ot(e().onDragStart,h,r,Yr.onDragStart)})})},s=function(u,g){var h=ln(g),b=xt(g);n||w();var x=!gd(u,n.lastCritical);x&&(n.lastCritical=u);var y=!vd(n.lastLocation,h);y&&(n.lastLocation=h);var D=!fd(n.lastCombine,b);if(D&&(n.lastCombine=b),!(!x&&!y&&!D)){var C=A({},Vr(u,n.mode),{combine:b,destination:h});t.add(function(){br("onDragUpdate",function(){return Ot(e().onDragUpdate,C,r,Yr.onDragUpdate)})})}},c=function(){n||w(),t.flush()},p=function(u){n||w(),n=null,br("onDragEnd",function(){return Ot(e().onDragEnd,u,r,Yr.onDragEnd)})},v=function(){if(n){var u=A({},Vr(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(u)}};return{beforeCapture:a,beforeStart:i,start:o,update:s,flush:c,drop:p,abort:v}},hd=function(e,r){var t=md(e,r);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;t.beforeStart(o,i.payload.movementMode),a(i),t.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var s=i.payload.completed.result;t.flush(),a(i),t.drop(s);return}if(a(i),i.type==="FLUSH"){t.abort();return}var c=n.getState();c.phase==="DRAGGING"&&t.update(c.critical,c.impact)}}}},bd=function(e){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&w(),e.dispatch(fn({completed:n.completed}))}}},xd=function(e){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(bo())}};t=requestAnimationFrame(function(){t=null,r=fe(window,[o])})}}}},yd=function(e){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&e.stopPublishing(),r(t)}}}},Dd=function(e){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),e.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Sd=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},wd=function(e){return function(r){return function(t){return function(n){if(Sd(n)){e.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var a=r.getState();a.phase!=="DRAGGING"&&w(),e.start(a);return}t(n),e.scroll(r.getState())}}}},Cd=function(e){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(ho({reason:n.reason})))}}}},Nd=Ni,Id=function(e){var r=e.dimensionMarshal,t=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return Ci(Fc,Nd(pl(ed(n),yd(r),_c(r),od,bd,xd,Cd,wd(o),dd,Dd(t),hd(a,i))))},Rt=function(){return{additions:{},removals:{},modified:{}}};function jd(e){var r=e.registry,t=e.callbacks,n=Rt(),a=null,i=function(){a||(t.collectionStarting(),a=requestAnimationFrame(function(){a=null;var v=n,d=v.additions,u=v.removals,g=v.modified,h=Object.keys(d).map(function(y){return r.draggable.getById(y).getDimension(_)}).sort(function(y,D){return y.descriptor.index-D.descriptor.index}),b=Object.keys(g).map(function(y){var D=r.droppable.getById(y),C=D.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:C}}),x={additions:h,removals:Object.keys(u),modified:b};n=Rt(),t.publish(x)}))},o=function(v){var d=v.descriptor.id;n.additions[d]=v,n.modified[v.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],i()},s=function(v){var d=v.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Rt())};return{add:o,remove:s,stop:c}}var Do=function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,a=e.width,i=ce({x:t,y:r},{x:a,y:n}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},So=function(){var e=document.documentElement;return e||w(),e},wo=function(){var e=So(),r=Do({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return r},Pd=function(){var e=yo(),r=wo(),t=e.y,n=e.x,a=So(),i=a.clientWidth,o=a.clientHeight,s=n+i,c=t+o,p=he({top:t,left:n,right:s,bottom:c}),v={frame:p,scroll:{initial:e,current:e,max:r,diff:{value:_,displacement:_}}};return v},Ed=function(e){var r=e.critical,t=e.scrollOptions,n=e.registry,a=Pd(),i=a.scroll.current,o=r.droppable,s=n.droppable.getAllByType(o.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(i,t)}),c=n.draggable.getAllByType(r.draggable.type).map(function(d){return d.getDimension(i)}),p={draggables:Qi(c),droppables:Xi(s)},v={dimensions:p,critical:r,viewport:a};return v};function ai(e,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=e.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Ad=function(e,r){var t=null,n=jd({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),a=function(g,h){e.droppable.exists(g)||w(),t&&r.updateDroppableIsEnabled({id:g,isEnabled:h})},i=function(g,h){t&&(e.droppable.exists(g)||w(),r.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:h}))},o=function(g,h){t&&(e.droppable.exists(g)||w(),r.updateDroppableScroll({id:g,newScroll:h}))},s=function(g,h){t&&e.droppable.getById(g).callbacks.scroll(h)},c=function(){if(t){n.stop();var g=t.critical.droppable;e.droppable.getAllByType(g.type).forEach(function(h){return h.callbacks.dragStopped()}),t.unsubscribe(),t=null}},p=function(g){t||w();var h=t.critical.draggable;g.type==="ADDITION"&&ai(e,h,g.value)&&n.add(g.value),g.type==="REMOVAL"&&ai(e,h,g.value)&&n.remove(g.value)},v=function(g){t&&w();var h=e.draggable.getById(g.draggableId),b=e.droppable.getById(h.descriptor.droppableId),x={draggable:h.descriptor,droppable:b.descriptor},y=e.subscribe(p);return t={critical:x,unsubscribe:y},Ed({critical:x,registry:e,scrollOptions:g.scrollOptions})},d={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:s,updateDroppableScroll:o,startPublishing:v,stopPublishing:c};return d},Co=function(e,r){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===r?!1:e.completed.result.reason==="DROP"},Od=function(e){window.scrollBy(e.x,e.y)},Rd=Z(function(e){return bt(e).filter(function(r){return!(!r.isEnabled||!r.frame)})}),Bd=function(r,t){var n=Ae(Rd(t),function(a){return a.frame||w(),lo(a.frame.pageMarginBox)(r)});return n},Td=function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var a=n[t];return a.frame?a:null}var i=Bd(r,n);return i},Pe={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Md=function(e,r){var t=e[r.size]*Pe.startFromPercentage,n=e[r.size]*Pe.maxScrollAtPercentage,a={startScrollingFrom:t,maxScrollValueAt:n};return a},No=function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,a=t-r;if(a===0)return 0;var i=n-r,o=i/a;return o},hn=1,Fd=function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return Pe.maxPixelScroll;if(e===r.startScrollingFrom)return hn;var t=No({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=1-t,a=Pe.maxPixelScroll*Pe.ease(n);return Math.ceil(a)},ii=Pe.durationDampening.accelerateAt,oi=Pe.durationDampening.stopDampeningAt,Ld=function(e,r){var t=r,n=oi,a=Date.now(),i=a-t;if(i>=oi)return e;if(i<ii)return hn;var o=No({startOfRange:ii,endOfRange:n,current:i}),s=e*Pe.ease(o);return Math.ceil(s)},li=function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=Fd(r,t);return i===0?0:a?Math.max(Ld(i,n),hn):i},si=function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=Md(r,a),s=t[a.end]<t[a.start];return s?li({distanceToEdge:t[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i}):-1*li({distanceToEdge:t[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i})},Gd=function(e){var r=e.container,t=e.subject,n=e.proposedScroll,a=t.height>r.height,i=t.width>r.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},Wd=Ki(function(e){return e===0?0:e}),Io=function(e){var r=e.dragStartTime,t=e.container,n=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-t.top,right:t.right-a.x,bottom:t.bottom-a.y,left:a.x-t.left},s=si({container:t,distanceToEdges:o,dragStartTime:r,axis:sn,shouldUseTimeDampening:i}),c=si({container:t,distanceToEdges:o,dragStartTime:r,axis:eo,shouldUseTimeDampening:i}),p=Wd({x:c,y:s});if(je(p,_))return null;var v=Gd({container:t,subject:n,proposedScroll:p});return v?je(v,_)?null:v:null},$d=Ki(function(e){return e===0?0:e>0?1:-1}),bn=function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,a=r.change,i=ae(t,a),o={x:e(i.x,n.x),y:e(i.y,n.y)};return je(o,_)?null:o}}(),jo=function(r){var t=r.max,n=r.current,a=r.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},o=$d(a),s=bn({max:i,current:n,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},xn=function(r,t){return jo({current:r.scroll.current,max:r.scroll.max,change:t})},kd=function(r,t){if(!xn(r,t))return null;var n=r.scroll.max,a=r.scroll.current;return bn({current:a,max:n,change:t})},yn=function(r,t){var n=r.frame;return n?jo({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Hd=function(r,t){var n=r.frame;return!n||!yn(r,t)?null:bn({current:n.scroll.current,max:n.scroll.max,change:t})},Ud=function(e){var r=e.viewport,t=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=Io({dragStartTime:a,container:r.frame,subject:t,center:n,shouldUseTimeDampening:i});return o&&xn(r,o)?o:null},qd=function(e){var r=e.droppable,t=e.subject,n=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=r.frame;if(!o)return null;var s=Io({dragStartTime:a,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i});return s&&yn(r,s)?s:null},ci=function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=r.current.page.borderBoxCenter,s=r.dimensions.draggables[r.critical.draggable.id],c=s.page.marginBox;if(r.isWindowScrollAllowed){var p=r.viewport,v=Ud({dragStartTime:t,viewport:p,subject:c,center:o,shouldUseTimeDampening:n});if(v){a(v);return}}var d=Td({center:o,destination:de(r.impact),droppables:r.dimensions.droppables});if(d){var u=qd({dragStartTime:t,droppable:d,subject:c,center:o,shouldUseTimeDampening:n});u&&i(d.descriptor.id,u)}},Vd=function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=Ir(r),a=Ir(t),i=null,o=function(v){i||w();var d=i,u=d.shouldUseTimeDampening,g=d.dragStartTime;ci({state:v,scrollWindow:n,scrollDroppable:a,dragStartTime:g,shouldUseTimeDampening:u})},s=function(v){i&&w();var d=Date.now(),u=!1,g=function(){u=!0};ci({state:v,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),i={dragStartTime:d,shouldUseTimeDampening:u},u&&o(v)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:s,stop:c,scroll:o}},zd=function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,a=function(p,v){var d=ae(p.current.client.selection,v);r({client:d})},i=function(p,v){if(!yn(p,v))return v;var d=Hd(p,v);if(!d)return t(p.descriptor.id,v),null;var u=ce(v,d);t(p.descriptor.id,u);var g=ce(v,u);return g},o=function(p,v,d){if(!p||!xn(v,d))return d;var u=kd(v,d);if(!u)return n(d),null;var g=ce(d,u);n(g);var h=ce(d,g);return h},s=function(p){var v=p.scrollJumpRequest;if(v){var d=de(p.impact);d||w();var u=i(p.dimensions.droppables[d],v);if(u){var g=p.viewport,h=o(p.isWindowScrollAllowed,g,u);h&&a(p,h)}}};return s},Jd=function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,a=Vd({scrollWindow:t,scrollDroppable:r}),i=zd({move:n,scrollWindow:t,scrollDroppable:r}),o=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){a.scroll(p);return}p.scrollJumpRequest&&i(p)}},s={scroll:o,start:a.start,stop:a.stop};return s},er="data-rbd",rr=function(){var e=er+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Ht=function(){var e=er+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Kd=function(){var e=er+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),di={contextId:er+"-scroll-container-context-id"},Yd=function(r){return function(t){return"["+t+'="'+r+'"]'}},xr=function(r,t){return r.map(function(n){var a=n.styles[t];return a?n.selector+" { "+a+" }":""}).join(" ")},Xd="pointer-events: none;",Qd=function(e){var r=Yd(e),t=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(rr.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:Xd,dropAnimating:s}}}(),n=function(){var s=`
      transition: `+Cr.outOfTheWay+`;
    `;return{selector:r(Ht.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),a={selector:r(Kd.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,t,a,i];return{always:xr(o,"always"),resting:xr(o,"resting"),dragging:xr(o,"dragging"),dropAnimating:xr(o,"dropAnimating"),userCancel:xr(o,"userCancel")}},ue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?N.useLayoutEffect:N.useEffect,Bt=function(){var r=document.querySelector("head");return r||w(),r},ui=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function Zd(e,r){var t=G(function(){return Qd(e)},[e]),n=N.useRef(null),a=N.useRef(null),i=P(Z(function(d){var u=a.current;u||w(),u.textContent=d}),[]),o=P(function(d){var u=n.current;u||w(),u.textContent=d},[]);ue(function(){!n.current&&!a.current||w();var d=ui(r),u=ui(r);return n.current=d,a.current=u,d.setAttribute(er+"-always",e),u.setAttribute(er+"-dynamic",e),Bt().appendChild(d),Bt().appendChild(u),o(t.always),i(t.resting),function(){var g=function(b){var x=b.current;x||w(),Bt().removeChild(x),b.current=null};g(n),g(a)}},[r,o,i,t.always,t.resting,e]);var s=P(function(){return i(t.dragging)},[i,t.dragging]),c=P(function(d){if(d==="DROP"){i(t.dropAnimating);return}i(t.userCancel)},[i,t.dropAnimating,t.userCancel]),p=P(function(){a.current&&i(t.resting)},[i,t.resting]),v=G(function(){return{dragging:s,dropping:c,resting:p}},[s,c,p]);return v}var Po=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function St(e){return e instanceof Po(e).HTMLElement}function _d(e,r){var t="["+rr.contextId+'="'+e+'"]',n=Yi(document.querySelectorAll(t));if(!n.length)return null;var a=Ae(n,function(i){return i.getAttribute(rr.draggableId)===r});return!a||!St(a)?null:a}function eu(e){var r=N.useRef({}),t=N.useRef(null),n=N.useRef(null),a=N.useRef(!1),i=P(function(u,g){var h={id:u,focus:g};return r.current[u]=h,function(){var x=r.current,y=x[u];y!==h&&delete x[u]}},[]),o=P(function(u){var g=_d(e,u);g&&g!==document.activeElement&&g.focus()},[e]),s=P(function(u,g){t.current===u&&(t.current=g)},[]),c=P(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var u=t.current;u&&o(u)}))},[o]),p=P(function(u){t.current=null;var g=document.activeElement;g&&g.getAttribute(rr.draggableId)===u&&(t.current=u)},[]);ue(function(){return a.current=!0,function(){a.current=!1;var u=n.current;u&&cancelAnimationFrame(u)}},[]);var v=G(function(){return{register:i,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:s}},[i,p,c,s]);return v}function ru(){var e={draggables:{},droppables:{}},r=[];function t(d){return r.push(d),function(){var g=r.indexOf(d);g!==-1&&r.splice(g,1)}}function n(d){r.length&&r.forEach(function(u){return u(d)})}function a(d){return e.draggables[d]||null}function i(d){var u=a(d);return u||w(),u}var o={register:function(u){e.draggables[u.descriptor.id]=u,n({type:"ADDITION",value:u})},update:function(u,g){var h=e.draggables[g.descriptor.id];h&&h.uniqueId===u.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:function(u){var g=u.descriptor.id,h=a(g);h&&u.uniqueId===h.uniqueId&&(delete e.draggables[g],n({type:"REMOVAL",value:u}))},getById:i,findById:a,exists:function(u){return!!a(u)},getAllByType:function(u){return tt(e.draggables).filter(function(g){return g.descriptor.type===u})}};function s(d){return e.droppables[d]||null}function c(d){var u=s(d);return u||w(),u}var p={register:function(u){e.droppables[u.descriptor.id]=u},unregister:function(u){var g=s(u.descriptor.id);g&&u.uniqueId===g.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:s,exists:function(u){return!!s(u)},getAllByType:function(u){return tt(e.droppables).filter(function(g){return g.descriptor.type===u})}};function v(){e.draggables={},e.droppables={},r.length=0}return{draggable:o,droppable:p,subscribe:t,clean:v}}function tu(){var e=G(ru,[]);return N.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Dn=U.createContext(null),at=function(){var e=document.body;return e||w(),e},nu={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},au=function(r){return"rbd-announcement-"+r};function iu(e){var r=G(function(){return au(e)},[e]),t=N.useRef(null);N.useEffect(function(){var i=document.createElement("div");return t.current=i,i.id=r,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),A(i.style,nu),at().appendChild(i),function(){setTimeout(function(){var c=at();c.contains(i)&&c.removeChild(i),i===t.current&&(t.current=null)})}},[r]);var n=P(function(a){var i=t.current;if(i){i.textContent=a;return}},[]);return n}var ou=0,lu={separator:"::"};function Sn(e,r){return r===void 0&&(r=lu),G(function(){return""+e+r.separator+ou++},[r.separator,e])}function su(e){var r=e.contextId,t=e.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function cu(e){var r=e.contextId,t=e.text,n=Sn("hidden-text",{separator:"-"}),a=G(function(){return su({contextId:r,uniqueId:n})},[n,r]);return N.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=t,o.style.display="none",at().appendChild(o),function(){var c=at();c.contains(o)&&c.removeChild(o)}},[a,t]),a}var wt=U.createContext(null);function Eo(e){var r=N.useRef(e);return N.useEffect(function(){r.current=e}),r}function du(){var e=null;function r(){return!!e}function t(o){return o===e}function n(o){e&&w();var s={abandon:o};return e=s,s}function a(){e||w(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:r,isActive:t,claim:n,release:a,tryAbandon:i}}var uu=9,pu=13,wn=27,Ao=32,vu=33,fu=34,gu=35,mu=36,hu=37,bu=38,xu=39,yu=40,zr,Du=(zr={},zr[pu]=!0,zr[uu]=!0,zr),Oo=function(e){Du[e.keyCode]&&e.preventDefault()},Ct=function(){var e="visibilitychange";if(typeof document>"u")return e;var r=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],t=Ae(r,function(n){return"on"+n in document});return t||e}(),Ro=0,pi=5;function Su(e,r){return Math.abs(r.x-e.x)>=pi||Math.abs(r.y-e.y)>=pi}var vi={type:"IDLE"};function wu(e){var r=e.cancel,t=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var s=o.button,c=o.clientX,p=o.clientY;if(s===Ro){var v={x:c,y:p},d=n();if(d.type==="DRAGGING"){o.preventDefault(),d.actions.move(v);return}d.type!=="PENDING"&&w();var u=d.point;if(Su(u,v)){o.preventDefault();var g=d.actions.fluidLift(v);a({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(o){var s=n();if(s.type!=="DRAGGING"){r();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),r()}},{eventName:"keydown",fn:function(o){var s=n();if(s.type==="PENDING"){r();return}if(o.keyCode===wn){o.preventDefault(),r();return}Oo(o)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(o){var s=n();if(s.type==="IDLE"&&w(),s.actions.shouldRespectForcePress()){r();return}o.preventDefault()}},{eventName:Ct,fn:r}]}function Cu(e){var r=N.useRef(vi),t=N.useRef(Ie),n=G(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===Ro&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var u=e.findClosestDraggableId(d);if(u){var g=e.tryGetLock(u,o,{sourceEvent:d});if(g){d.preventDefault();var h={x:d.clientX,y:d.clientY};t.current(),p(g,h)}}}}}},[e]),a=G(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var u=e.findClosestDraggableId(d);if(u){var g=e.findOptionsForDraggable(u);g&&(g.shouldRespectForcePress||e.canGetLock(u)&&d.preventDefault())}}}}},[e]),i=P(function(){var d={passive:!1,capture:!0};t.current=fe(window,[a,n],d)},[a,n]),o=P(function(){var v=r.current;v.type!=="IDLE"&&(r.current=vi,t.current(),i())},[i]),s=P(function(){var v=r.current;o(),v.type==="DRAGGING"&&v.actions.cancel({shouldBlockNextClick:!0}),v.type==="PENDING"&&v.actions.abort()},[o]),c=P(function(){var d={capture:!0,passive:!1},u=wu({cancel:s,completed:o,getPhase:function(){return r.current},setPhase:function(h){r.current=h}});t.current=fe(window,u,d)},[s,o]),p=P(function(d,u){r.current.type!=="IDLE"&&w(),r.current={type:"PENDING",point:u,actions:d},c()},[c]);ue(function(){return i(),function(){t.current()}},[i])}var Je;function Nu(){}var Iu=(Je={},Je[fu]=!0,Je[vu]=!0,Je[mu]=!0,Je[gu]=!0,Je);function ju(e,r){function t(){r(),e.cancel()}function n(){r(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===wn){i.preventDefault(),t();return}if(i.keyCode===Ao){i.preventDefault(),n();return}if(i.keyCode===yu){i.preventDefault(),e.moveDown();return}if(i.keyCode===bu){i.preventDefault(),e.moveUp();return}if(i.keyCode===xu){i.preventDefault(),e.moveRight();return}if(i.keyCode===hu){i.preventDefault(),e.moveLeft();return}if(Iu[i.keyCode]){i.preventDefault();return}Oo(i)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:Ct,fn:t}]}function Pu(e){var r=N.useRef(Nu),t=G(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Ao)return;var o=e.findClosestDraggableId(i);if(!o)return;var s=e.tryGetLock(o,v,{sourceEvent:i});if(!s)return;i.preventDefault();var c=!0,p=s.snapLift();r.current();function v(){c||w(),c=!1,r.current(),n()}r.current=fe(window,ju(p,v),{capture:!0,passive:!1})}}},[e]),n=P(function(){var i={passive:!1,capture:!0};r.current=fe(window,[t],i)},[t]);ue(function(){return n(),function(){r.current()}},[n])}var Tt={type:"IDLE"},Eu=120,Au=.15;function Ou(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(t().type!=="DRAGGING"){r();return}a.keyCode===wn&&a.preventDefault(),r()}},{eventName:Ct,fn:r}]}function Ru(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=n();if(o.type!=="DRAGGING"){r();return}o.hasMoved=!0;var s=i.touches[0],c=s.clientX,p=s.clientY,v={x:c,y:p};i.preventDefault(),o.actions.move(v)}},{eventName:"touchend",fn:function(i){var o=n();if(o.type!=="DRAGGING"){r();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){r();return}i.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(i){var o=n();o.type==="IDLE"&&w();var s=i.touches[0];if(s){var c=s.force>=Au;if(c){var p=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){p&&r();return}if(p){if(o.hasMoved){i.preventDefault();return}r();return}i.preventDefault()}}}},{eventName:Ct,fn:r}]}function Bu(e){var r=N.useRef(Tt),t=N.useRef(Ie),n=P(function(){return r.current},[]),a=P(function(g){r.current=g},[]),i=G(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var h=e.findClosestDraggableId(g);if(h){var b=e.tryGetLock(h,s,{sourceEvent:g});if(b){var x=g.touches[0],y=x.clientX,D=x.clientY,C={x:y,y:D};t.current(),d(b,C)}}}}}},[e]),o=P(function(){var g={capture:!0,passive:!1};t.current=fe(window,[i],g)},[i]),s=P(function(){var u=r.current;u.type!=="IDLE"&&(u.type==="PENDING"&&clearTimeout(u.longPressTimerId),a(Tt),t.current(),o())},[o,a]),c=P(function(){var u=r.current;s(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[s]),p=P(function(){var g={capture:!0,passive:!1},h={cancel:c,completed:s,getPhase:n},b=fe(window,Ru(h),g),x=fe(window,Ou(h),g);t.current=function(){b(),x()}},[c,n,s]),v=P(function(){var g=n();g.type!=="PENDING"&&w();var h=g.actions.fluidLift(g.point);a({type:"DRAGGING",actions:h,hasMoved:!1})},[n,a]),d=P(function(g,h){n().type!=="IDLE"&&w();var b=setTimeout(v,Eu);a({type:"PENDING",point:h,actions:g,longPressTimerId:b}),p()},[p,n,a,v]);ue(function(){return o(),function(){t.current();var h=n();h.type==="PENDING"&&(clearTimeout(h.longPressTimerId),a(Tt))}},[n,o,a]),ue(function(){var g=fe(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var Tu={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Bo(e,r){if(r==null)return!1;var t=!!Tu[r.tagName.toLowerCase()];if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===e?!1:Bo(e,r.parentElement)}function Mu(e,r){var t=r.target;return St(t)?Bo(e,t):!1}var Fu=function(e){return he(e.getBoundingClientRect()).center};function Lu(e){return e instanceof Po(e).Element}var Gu=function(){var e="matches";if(typeof document>"u")return e;var r=[e,"msMatchesSelector","webkitMatchesSelector"],t=Ae(r,function(n){return n in Element.prototype});return t||e}();function To(e,r){return e==null?null:e[Gu](r)?e:To(e.parentElement,r)}function Wu(e,r){return e.closest?e.closest(r):To(e,r)}function $u(e){return"["+rr.contextId+'="'+e+'"]'}function ku(e,r){var t=r.target;if(!Lu(t))return null;var n=$u(e),a=Wu(t,n);return!a||!St(a)?null:a}function Hu(e,r){var t=ku(e,r);return t?t.getAttribute(rr.draggableId):null}function Uu(e,r){var t="["+Ht.contextId+'="'+e+'"]',n=Yi(document.querySelectorAll(t)),a=Ae(n,function(i){return i.getAttribute(Ht.id)===r});return!a||!St(a)?null:a}function qu(e){e.preventDefault()}function Jr(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||r!==t)}function Mo(e){var r=e.lockAPI,t=e.store,n=e.registry,a=e.draggableId;if(r.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!Co(t.getState(),a))}function Vu(e){var r=e.lockAPI,t=e.contextId,n=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent,c=Mo({lockAPI:r,store:n,registry:a,draggableId:i});if(!c)return null;var p=a.draggable.getById(i),v=Uu(t,p.descriptor.id);if(!v||s&&!p.options.canDragInteractiveElements&&Mu(v,s))return null;var d=r.claim(o||Ie),u="PRE_DRAG";function g(){return p.options.shouldRespectForcePress}function h(){return r.isActive(d)}function b(I,B){Jr({expected:I,phase:u,isLockActive:h,shouldWarn:!0})&&n.dispatch(B())}var x=b.bind(null,"DRAGGING");function y(I){function B(){r.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(B(),u!=="PRE_DRAG"&&w()),n.dispatch(Gc(I.liftActionArgs)),u="DRAGGING";function W(T,F){if(F===void 0&&(F={shouldBlockNextClick:!1}),I.cleanup(),F.shouldBlockNextClick){var M=fe(window,[{eventName:"click",fn:qu,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(M)}B(),n.dispatch(ho({reason:T}))}return A({isActive:function(){return Jr({expected:"DRAGGING",phase:u,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(F){return W("DROP",F)},cancel:function(F){return W("CANCEL",F)}},I.actions)}function D(I){var B=Ir(function(T){x(function(){return mo({client:T})})}),W=y({liftActionArgs:{id:i,clientSelection:I,movementMode:"FLUID"},cleanup:function(){return B.cancel()},actions:{move:B}});return A({},W,{move:B})}function C(){var I={moveUp:function(){return x(Jc)},moveRight:function(){return x(Yc)},moveDown:function(){return x(Kc)},moveLeft:function(){return x(Xc)}};return y({liftActionArgs:{id:i,clientSelection:Fu(v),movementMode:"SNAP"},cleanup:Ie,actions:I})}function f(){var I=Jr({expected:"PRE_DRAG",phase:u,isLockActive:h,shouldWarn:!0});I&&r.release()}var S={isActive:function(){return Jr({expected:"PRE_DRAG",phase:u,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:D,snapLift:C,abort:f};return S}var zu=[Cu,Pu,Bu];function Ju(e){var r=e.contextId,t=e.store,n=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?zu:[],a||[]),s=N.useState(function(){return du()})[0],c=P(function(D,C){D.isDragging&&!C.isDragging&&s.tryAbandon()},[s]);ue(function(){var D=t.getState(),C=t.subscribe(function(){var f=t.getState();c(D,f),D=f});return C},[s,t,c]),ue(function(){return s.tryAbandon},[s.tryAbandon]);for(var p=P(function(y){return Mo({lockAPI:s,registry:n,store:t,draggableId:y})},[s,n,t]),v=P(function(y,D,C){return Vu({lockAPI:s,registry:n,contextId:r,store:t,draggableId:y,forceSensorStop:D,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[r,s,n,t]),d=P(function(y){return Hu(r,y)},[r]),u=P(function(y){var D=n.draggable.findById(y);return D?D.options:null},[n.draggable]),g=P(function(){s.isClaimed()&&(s.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(vn()))},[s,t]),h=P(s.isClaimed,[s]),b=G(function(){return{canGetLock:p,tryGetLock:v,findClosestDraggableId:d,findOptionsForDraggable:u,tryReleaseLock:g,isLockClaimed:h}},[p,v,d,u,g,h]),x=0;x<o.length;x++)o[x](b)}var Ku=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function yr(e){return e.current||w(),e.current}function Yu(e){var r=e.contextId,t=e.setCallbacks,n=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=N.useRef(null),s=Eo(e),c=P(function(){return Ku(s.current)},[s]),p=iu(r),v=cu({contextId:r,text:i}),d=Zd(r,a),u=P(function(T){yr(o).dispatch(T)},[]),g=G(function(){return Fa({publishWhileDragging:$c,updateDroppableScroll:Hc,updateDroppableIsEnabled:Uc,updateDroppableIsCombineEnabled:qc,collectionStarting:kc},u)},[u]),h=tu(),b=G(function(){return Ad(h,g)},[h,g]),x=G(function(){return Jd(A({scrollWindow:Od,scrollDroppable:b.scrollDroppable},Fa({move:mo},u)))},[b.scrollDroppable,u]),y=eu(r),D=G(function(){return Id({announce:p,autoScroller:x,dimensionMarshal:b,focusMarshal:y,getResponders:c,styleMarshal:d})},[p,x,b,y,c,d]);o.current=D;var C=P(function(){var T=yr(o),F=T.getState();F.phase!=="IDLE"&&T.dispatch(vn())},[]),f=P(function(){var T=yr(o).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),S=G(function(){return{isDragging:f,tryAbort:C}},[f,C]);t(S);var I=P(function(T){return Co(yr(o).getState(),T)},[]),B=P(function(){return Le(yr(o).getState())},[]),W=G(function(){return{marshal:b,focus:y,contextId:r,canLift:I,isMovementAllowed:B,dragHandleUsageInstructionsId:v,registry:h}},[r,b,v,y,I,B,h]);return Ju({contextId:r,store:D,registry:h,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),N.useEffect(function(){return C},[C]),U.createElement(wt.Provider,{value:W},U.createElement(hl,{context:Dn,store:D},e.children))}var Xu=0;function Qu(){return G(function(){return""+Xu++},[])}function Zu(e){var r=Qu(),t=e.dragHandleUsageInstructions||Yr.dragHandleUsageInstructions;return U.createElement(Ps,null,function(n){return U.createElement(Yu,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Fo=function(r){return function(t){return r===t}},_u=Fo("scroll"),ep=Fo("auto"),fi=function(r,t){return t(r.overflowX)||t(r.overflowY)},rp=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return fi(n,_u)||fi(n,ep)},tp=function(){return!1},np=function e(r){return r==null?null:r===document.body?tp()?r:null:r===document.documentElement?null:rp(r)?r:e(r.parentElement)},Ut=function(e){return{x:e.scrollLeft,y:e.scrollTop}},ap=function e(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:e(r.parentElement)},ip=function(e){var r=np(e),t=ap(e);return{closestScrollable:r,isFixedOnPage:t}},op=function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,c=e.closest,p=function(){if(!c)return null;var g=c.scrollSize,h=c.client,b=Do({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:h.paddingBox.height,width:h.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:h,scrollSize:g,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:b,diff:{value:_,displacement:_}}}}(),v=i==="vertical"?sn:eo,d=_e({page:s,withPlaceholder:null,axis:v,frame:p}),u={descriptor:r,isCombineEnabled:n,isFixedOnPage:a,axis:v,isEnabled:t,client:o,page:s,frame:p,subject:d};return u},lp=function(r,t){var n=qi(r);if(!t||r!==t)return n;var a=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,o=a+t.scrollHeight,s=i+t.scrollWidth,c={top:a,right:s,bottom:o,left:i},p=tn(c,n.border),v=nn({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return v},sp=function(e){var r=e.ref,t=e.descriptor,n=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,p=n.closestScrollable,v=lp(r,p),d=_r(v,a),u=function(){if(!p)return null;var h=qi(p),b={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:h,page:_r(h,a),scroll:Ut(p),scrollSize:b,shouldClipSubject:c}}(),g=op({descriptor:t,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:i,client:v,page:d,closest:u});return g},cp={passive:!1},dp={passive:!0},gi=function(e){return e.shouldPublishImmediately?cp:dp};function it(e){var r=N.useContext(e);return r||w(),r}var Kr=function(r){return r&&r.env.closestScrollable||null};function up(e){var r=N.useRef(null),t=it(wt),n=Sn("droppable"),a=t.registry,i=t.marshal,o=Eo(e),s=G(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=N.useRef(s),p=G(function(){return Z(function(f,S){r.current||w();var I={x:f,y:S};i.updateDroppableScroll(s.id,I)})},[s.id,i]),v=P(function(){var f=r.current;return!f||!f.env.closestScrollable?_:Ut(f.env.closestScrollable)},[]),d=P(function(){var f=v();p(f.x,f.y)},[v,p]),u=G(function(){return Ir(d)},[d]),g=P(function(){var f=r.current,S=Kr(f);f&&S||w();var I=f.scrollOptions;if(I.shouldPublishImmediately){d();return}u()},[u,d]),h=P(function(f,S){r.current&&w();var I=o.current,B=I.getDroppableRef();B||w();var W=ip(B),T={ref:B,descriptor:s,env:W,scrollOptions:S};r.current=T;var F=sp({ref:B,descriptor:s,env:W,windowScroll:f,direction:I.direction,isDropDisabled:I.isDropDisabled,isCombineEnabled:I.isCombineEnabled,shouldClipSubject:!I.ignoreContainerClipping}),M=W.closestScrollable;return M&&(M.setAttribute(di.contextId,t.contextId),M.addEventListener("scroll",g,gi(T.scrollOptions))),F},[t.contextId,s,g,o]),b=P(function(){var f=r.current,S=Kr(f);return f&&S||w(),Ut(S)},[]),x=P(function(){var f=r.current;f||w();var S=Kr(f);r.current=null,S&&(u.cancel(),S.removeAttribute(di.contextId),S.removeEventListener("scroll",g,gi(f.scrollOptions)))},[g,u]),y=P(function(f){var S=r.current;S||w();var I=Kr(S);I||w(),I.scrollTop+=f.y,I.scrollLeft+=f.x},[]),D=G(function(){return{getDimensionAndWatchScroll:h,getScrollWhileDragging:b,dragStopped:x,scroll:y}},[x,h,b,y]),C=G(function(){return{uniqueId:n,descriptor:s,callbacks:D}},[D,s,n]);ue(function(){return c.current=C.descriptor,a.droppable.register(C),function(){r.current&&x(),a.droppable.unregister(C)}},[D,s,x,C,i,a.droppable]),ue(function(){r.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),ue(function(){r.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Mt(){}var mi={width:0,height:0,margin:Ts},pp=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,a=r.animate;return t||a==="close"?mi:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},vp=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,a=r.animate,i=pp({isAnimatingOpenOnMount:t,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Cr.placeholder:null}};function fp(e){var r=N.useRef(null),t=P(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),n=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,s=N.useState(e.animate==="open"),c=s[0],p=s[1];N.useEffect(function(){return c?n!=="open"?(t(),p(!1),Mt):r.current?Mt:(r.current=setTimeout(function(){r.current=null,p(!1)}),t):Mt},[n,c,t]);var v=P(function(u){u.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),d=vp({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return U.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":o,onTransitionEnd:v,ref:e.innerRef})}var gp=U.memo(fp),Cn=U.createContext(null),mp=function(e){wi(r,e);function r(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},r}(U.PureComponent),hi={dragging:5e3,dropAnimating:4500},hp=function(r,t){return t?Cr.drop(t.duration):r?Cr.snap:Cr.fluid},bp=function(r,t){return r?t?Ar.opacity.drop:Ar.opacity.combining:null},xp=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function yp(e){var r=e.dimension,t=r.client,n=e.offset,a=e.combineWith,i=e.dropping,o=!!a,s=xp(e),c=!!i,p=c?$t.drop(n,o):$t.moveTo(n),v={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:hp(s,i),transform:p,opacity:bp(o,c),zIndex:c?hi.dropAnimating:hi.dragging,pointerEvents:"none"};return v}function Dp(e){return{transform:$t.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Sp(e){return e.type==="DRAGGING"?yp(e):Dp(e)}function wp(e,r,t){t===void 0&&(t=_);var n=window.getComputedStyle(r),a=r.getBoundingClientRect(),i=Ui(a,n),o=_r(i,t),s={client:i,tagName:r.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},p={descriptor:e,placeholder:s,displaceBy:c,client:i,page:o};return p}function Cp(e){var r=Sn("draggable"),t=e.descriptor,n=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,s=e.isEnabled,c=G(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:s}},[i,s,o]),p=P(function(g){var h=a();return h||w(),wp(t,h,g)},[t,a]),v=G(function(){return{uniqueId:r,descriptor:t,options:c,getDimension:p}},[t,p,c,r]),d=N.useRef(v),u=N.useRef(!0);ue(function(){return n.draggable.register(d.current),function(){return n.draggable.unregister(d.current)}},[n.draggable]),ue(function(){if(u.current){u.current=!1;return}var g=d.current;d.current=v,n.draggable.update(v,g)},[v,n.draggable])}function Np(e){e.preventDefault()}function Ip(e){var r=N.useRef(null),t=P(function(T){r.current=T},[]),n=P(function(){return r.current},[]),a=it(wt),i=a.contextId,o=a.dragHandleUsageInstructionsId,s=a.registry,c=it(Cn),p=c.type,v=c.droppableId,d=G(function(){return{id:e.draggableId,index:e.index,type:p,droppableId:v}},[e.draggableId,e.index,p,v]),u=e.children,g=e.draggableId,h=e.isEnabled,b=e.shouldRespectForcePress,x=e.canDragInteractiveElements,y=e.isClone,D=e.mapped,C=e.dropAnimationFinished;if(!y){var f=G(function(){return{descriptor:d,registry:s,getDraggableRef:n,canDragInteractiveElements:x,shouldRespectForcePress:b,isEnabled:h}},[d,s,n,x,b,h]);Cp(f)}var S=G(function(){return h?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Np}:null},[i,o,g,h]),I=P(function(T){D.type==="DRAGGING"&&D.dropping&&T.propertyName==="transform"&&C()},[C,D]),B=G(function(){var T=Sp(D),F=D.type==="DRAGGING"&&D.dropping?I:null,M={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":g,style:T,onTransitionEnd:F},dragHandleProps:S};return M},[i,S,g,D,I,t]),W=G(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return u(B,D.snapshot,W)}var Lo=function(e,r){return e===r},Go=function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null},jp=function(r){return r.combine?r.combine.draggableId:null},Pp=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function Ep(){var e=Z(function(a,i){return{x:a,y:i}}),r=Z(function(a,i,o,s,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:s,combineTargetFor:null}}),t=Z(function(a,i,o,s,c,p,v){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:i,offset:a,dimension:o,forceShouldAnimate:v,snapshot:r(i,s,c,p,null)}}}),n=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var s=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],p=de(i.impact),v=Pp(i.impact),d=i.forceShouldAnimate;return t(e(s.x,s.y),i.movementMode,c,o.isClone,p,v,d)}if(i.phase==="DROP_ANIMATING"){var u=i.completed;if(u.result.draggableId!==o.draggableId)return null;var g=o.isClone,h=i.dimensions.draggables[o.draggableId],b=u.result,x=b.mode,y=Go(b),D=jp(b),C=i.dropDuration,f={duration:C,curve:gn.drop,moveTo:i.newHomeClientOffset,opacity:D?Ar.opacity.drop:null,scale:D?Ar.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:f,draggingOver:y,combineWith:D,mode:x,forceShouldAnimate:null,snapshot:r(x,g,y,D,f)}}}return null};return n}function Wo(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Ap={mapped:{type:"SECONDARY",offset:_,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Wo(null)}};function Op(){var e=Z(function(o,s){return{x:o,y:s}}),r=Z(Wo),t=Z(function(o,s,c){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:s,shouldAnimateDisplacement:c,snapshot:r(s)}}}),n=function(s){return s?t(_,s,!0):null},a=function(s,c,p,v){var d=p.displaced.visible[s],u=!!(v.inVirtualList&&v.effected[s]),g=xt(p),h=g&&g.draggableId===s?c:null;if(!d){if(!u)return n(h);if(p.displaced.invisible[s])return null;var b=tr(v.displacedBy.point),x=e(b.x,b.y);return t(x,h,!0)}if(u)return n(h);var y=p.displacedBy.point,D=e(y.x,y.y);return t(D,h,d.shouldAnimate)},i=function(s,c){if(s.isDragging)return s.critical.draggable.id===c.draggableId?null:a(c.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var p=s.completed;return p.result.draggableId===c.draggableId?null:a(c.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return i}var Rp=function(){var r=Ep(),t=Op(),n=function(i,o){return r(i,o)||t(i,o)||Ap};return n},Bp={dropAnimationFinished:bo},Tp=ki(Rp,Bp,null,{context:Dn,pure:!0,areStatePropsEqual:Lo})(Ip);function $o(e){var r=it(Cn),t=r.isUsingCloneFor;return t===e.draggableId&&!e.isClone?null:U.createElement(Tp,e)}function Mp(e){var r=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,t=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return U.createElement($o,A({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function Fp(e){var r=N.useContext(wt);r||w();var t=r.contextId,n=r.isMovementAllowed,a=N.useRef(null),i=N.useRef(null),o=e.children,s=e.droppableId,c=e.type,p=e.mode,v=e.direction,d=e.ignoreContainerClipping,u=e.isDropDisabled,g=e.isCombineEnabled,h=e.snapshot,b=e.useClone,x=e.updateViewportMaxScroll,y=e.getContainerForClone,D=P(function(){return a.current},[]),C=P(function(M){a.current=M},[]);P(function(){return i.current},[]);var f=P(function(M){i.current=M},[]),S=P(function(){n()&&x({maxScroll:wo()})},[n,x]);up({droppableId:s,type:c,mode:p,direction:v,isDropDisabled:u,isCombineEnabled:g,ignoreContainerClipping:d,getDroppableRef:D});var I=U.createElement(mp,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(M){var Q=M.onClose,ie=M.data,q=M.animate;return U.createElement(gp,{placeholder:ie,onClose:Q,innerRef:f,animate:q,contextId:t,onTransitionEnd:S})}),B=G(function(){return{innerRef:C,placeholder:I,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":t}}},[t,s,I,C]),W=b?b.dragging.draggableId:null,T=G(function(){return{droppableId:s,type:c,isUsingCloneFor:W}},[s,W,c]);function F(){if(!b)return null;var M=b.dragging,Q=b.render,ie=U.createElement($o,{draggableId:M.draggableId,index:M.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(q,re){return Q(q,re,M)});return qo.createPortal(ie,y())}return U.createElement(Cn.Provider,{value:T},o(B,h),F())}var Ft=function(r,t){return r===t.droppable.type},bi=function(r,t){return t.draggables[r.draggable.id]},Lp=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=A({},r,{shouldAnimatePlaceholder:!1}),n=Z(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=Z(function(o,s,c,p,v,d){var u=v.descriptor.id,g=v.descriptor.droppableId===o;if(g){var h=d?{render:d,dragging:n(v.descriptor)}:null,b={isDraggingOver:c,draggingOverWith:c?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:h}}if(!s)return t;if(!p)return r;var x={isDraggingOver:c,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!0,snapshot:x,useClone:null}}),i=function(s,c){var p=c.droppableId,v=c.type,d=!c.isDropDisabled,u=c.renderClone;if(s.isDragging){var g=s.critical;if(!Ft(v,g))return t;var h=bi(g,s.dimensions),b=de(s.impact)===p;return a(p,d,b,b,h,u)}if(s.phase==="DROP_ANIMATING"){var x=s.completed;if(!Ft(v,x.critical))return t;var y=bi(x.critical,s.dimensions);return a(p,d,Go(x.result)===p,de(x.impact)===p,y,u)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var D=s.completed;if(!Ft(v,D.critical))return t;var C=de(D.impact)===p,f=!!(D.impact.at&&D.impact.at.type==="COMBINE"),S=D.critical.droppable.id===p;return C?f?r:t:S?r:t}return t};return i},Gp={updateViewportMaxScroll:zc};function Wp(){return document.body||w(),document.body}var $p={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Wp},ko=ki(Lp,Gp,null,{context:Dn,pure:!0,areStatePropsEqual:Lo})(Fp);ko.defaultProps=$p;function kp({isOpen:e,onClose:r,fields:t,onSave:n,title:a="ترتيب حقول القالب",description:i="يمكنك سحب وإفلات الحقول لتغيير ترتيبها، أو استخدام أزرار الأسهم للتحريك لأعلى أو لأسفل."}){const[o,s]=N.useState([]),[c,p]=N.useState(!1);U.useEffect(()=>{if(e&&t&&t.length>0){console.log("تحديث الحقول المرتبة:",t);const h=[...t].sort((b,x)=>(b.displayOrder||0)-(x.displayOrder||0));s(h)}},[t,e]);const v=h=>{if(!h.destination||h.destination.index===h.source.index)return;const b=Array.from(o),[x]=b.splice(h.source.index,1);b.splice(h.destination.index,0,x);const y=b.map((D,C)=>({...D,displayOrder:C}));s(y)},d=h=>{if(h===0)return;const b=Array.from(o);[b[h-1],b[h]]=[b[h],b[h-1]];const x=b.map((y,D)=>({...y,displayOrder:D}));s(x)},u=h=>{if(h===o.length-1)return;const b=Array.from(o);[b[h],b[h+1]]=[b[h+1],b[h]];const x=b.map((y,D)=>({...y,displayOrder:D}));s(x)},g=()=>{p(!0),n(o),setTimeout(()=>{p(!1),r()},500)};return l.jsx(Vt,{open:e,onOpenChange:r,children:l.jsxs(zt,{className:"sm:max-w-md md:max-w-lg lg:max-w-xl",children:[l.jsxs(Jt,{children:[l.jsx(Kt,{children:a}),l.jsx(yi,{children:i})]}),l.jsx("div",{className:"py-4",children:l.jsx(Zu,{onDragEnd:v,children:l.jsx(ko,{droppableId:"fields-list",children:h=>l.jsxs("div",{...h.droppableProps,ref:h.innerRef,className:"space-y-2",children:[o.map((b,x)=>l.jsx(Mp,{draggableId:b.id.toString(),index:x,children:(y,D)=>l.jsxs("div",{ref:y.innerRef,...y.draggableProps,className:`flex items-center p-3 bg-white rounded-md border ${D.isDragging?"shadow-lg":"shadow-sm"}`,children:[l.jsx("div",{...y.dragHandleProps,className:"mr-2 p-1 rounded hover:bg-gray-100 cursor-grab",children:l.jsx(Si,{className:"h-5 w-5 text-gray-500"})}),l.jsxs("div",{className:"flex-1 mr-4",children:[l.jsx("div",{className:"font-medium text-sm",children:b.label||b.name}),l.jsxs("div",{className:"text-xs text-gray-500",children:[b.type," ",b.required&&"(مطلوب)",b.name&&l.jsxs("span",{className:"opacity-50 mr-1",children:["- ",b.name]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[l.jsx(L,{type:"button",variant:"ghost",size:"icon",onClick:()=>d(x),disabled:x===0,className:"h-8 w-8",children:l.jsx(Qo,{className:"h-4 w-4"})}),l.jsx(L,{type:"button",variant:"ghost",size:"icon",onClick:()=>u(x),disabled:x===o.length-1,className:"h-8 w-8",children:l.jsx(Zo,{className:"h-4 w-4"})})]})]})},b.id.toString())),h.placeholder]})})})}),l.jsxs(Xr,{children:[l.jsx(L,{variant:"outline",onClick:r,children:"إلغاء"}),l.jsxs(L,{onClick:g,disabled:c,className:"gap-2",children:[c&&l.jsx(Ge,{className:"h-4 w-4 animate-spin"}),l.jsx(el,{className:"h-4 w-4 mr-2"}),"حفظ الترتيب"]})]})]})})}function Sv(){var me,Re,Be,Te,ke,ye,He,ir,Ue,Me,or,qe,Ve,Hr,Se,ze,Nn,In,jn,Pn,En,An,On,Rn,Bn,Tn,Mn,Fn,Ln,Gn,Wn,$n,kn,Hn,Un,qn,Vn,zn,Jn,Kn,Yn,Xn,Qn,Zn,_n,ea,ra,ta,na,aa,ia,oa,la,sa,ca,da,ua,pa,va,fa,ga,ma,ha,ba,xa,ya,Da,Sa,wa,Ca,Na,Ia,ja;const{templateId:e}=Vo(),[r,t]=zo(),{toast:n}=xi();Jo();const[a,i]=N.useState(null),[o,s]=N.useState([]),[c,p]=N.useState(!1),[v,d]=N.useState(!1),[u,g]=N.useState(!1),[h,b]=N.useState(!1),[x,y]=N.useState(null),[D,C]=N.useState(""),[f,S]=N.useState({name:"",label:"",labelAr:"",type:"text",imageType:"",required:!1,defaultValue:"",placeholder:"",placeholderAr:"",options:[],position:{x:50,y:50,snapToGrid:!1},style:{fontFamily:"Cairo",fontSize:24,fontWeight:"normal",color:"#000000",align:"center",textShadow:{enabled:!1,color:"#ffffff",blur:5}},displayOrder:0}),{data:I,isLoading:B}=Sr({queryKey:[`/api/templates/${e}`],enabled:!!e}),{data:W,isLoading:T,refetch:F}=Sr({queryKey:[`/api/admin/template-fields/${e}`],enabled:!!e});N.useEffect(()=>{W&&(console.log("Fields data received:",W),Array.isArray(W)&&s(W))},[W]);const M=Dr({mutationFn:m=>{const E={name:m.name,label:m.label,labelAr:m.labelAr||null,type:m.type||"text",imageType:m.imageType||null,required:!!m.required,defaultValue:m.defaultValue||null,placeholder:m.placeholder||null,placeholderAr:m.placeholderAr||null,options:m.options?JSON.parse(JSON.stringify(m.options)):[],position:m.position?JSON.parse(JSON.stringify(m.position)):{},style:m.style?JSON.parse(JSON.stringify(m.style)):{},displayOrder:m.displayOrder||0,templateId:parseInt(e||"0")};return Ke("POST","/api/admin/template-fields",E)},onSuccess:()=>{n({title:"تم إضافة الحقل بنجاح"}),p(!1),F(),O()},onError:m=>{n({title:"حدث خطأ",description:m.message||"حدث خطأ أثناء إضافة الحقل",variant:"destructive"})}}),Q=Dr({mutationFn:m=>{const E={name:m.name,label:m.label,labelAr:m.labelAr||null,type:m.type||"text",imageType:m.imageType||null,required:!!m.required,defaultValue:m.defaultValue||null,placeholder:m.placeholder||null,placeholderAr:m.placeholderAr||null,options:m.options?JSON.parse(JSON.stringify(m.options)):[],position:m.position?JSON.parse(JSON.stringify(m.position)):{},style:m.style?JSON.parse(JSON.stringify(m.style)):{},displayOrder:m.displayOrder||0,templateId:parseInt(e||"0")};return Ke("PUT",`/api/admin/template-fields/${x}`,E)},onSuccess:()=>{n({title:"تم تحديث الحقل بنجاح"}),p(!1),F(),O()},onError:m=>{n({title:"حدث خطأ",description:m.message||"حدث خطأ أثناء تحديث الحقل",variant:"destructive"})}}),ie=Dr({mutationFn:m=>Ke("DELETE",`/api/admin/template-fields/${m}`),onSuccess:()=>{n({title:"تم حذف الحقل بنجاح"}),F()},onError:m=>{n({title:"حدث خطأ",description:m.message||"حدث خطأ أثناء حذف الحقل",variant:"destructive"})}});N.useEffect(()=>{I&&(typeof I=="object"&&"json"in I?I.json().then(m=>i(m)):i(I))},[I]);const q=m=>{var E,j,z,K,we,Ce,Ne,lr,sr,cr,dr,ur,pr,vr,fr,gr,mr;y(m.id),S({name:m.name||"",label:m.label||"",labelAr:m.labelAr||"",type:m.type||"text",imageType:m.imageType||"",required:m.required||!1,defaultValue:m.defaultValue||"",placeholder:m.placeholder||"",placeholderAr:m.placeholderAr||"",options:m.options||[],position:m.position||{x:50,y:50,snapToGrid:!1},style:{fontFamily:((E=m.style)==null?void 0:E.fontFamily)||"Cairo",fontSize:((j=m.style)==null?void 0:j.fontSize)||24,fontWeight:((z=m.style)==null?void 0:z.fontWeight)||"normal",color:((K=m.style)==null?void 0:K.color)||"#000000",align:((we=m.style)==null?void 0:we.align)||"center",verticalPosition:((Ce=m.style)==null?void 0:Ce.verticalPosition)||"middle",textShadow:{enabled:((lr=(Ne=m.style)==null?void 0:Ne.textShadow)==null?void 0:lr.enabled)||!1,color:((cr=(sr=m.style)==null?void 0:sr.textShadow)==null?void 0:cr.color)||"#ffffff",blur:((ur=(dr=m.style)==null?void 0:dr.textShadow)==null?void 0:ur.blur)||5},imageMaxWidth:((pr=m.style)==null?void 0:pr.imageMaxWidth)||void 0,imageMaxHeight:((vr=m.style)==null?void 0:vr.imageMaxHeight)||void 0,imageBorder:((fr=m.style)==null?void 0:fr.imageBorder)||!1,imageRounded:((gr=m.style)==null?void 0:gr.imageRounded)||!1,layer:((mr=m.style)==null?void 0:mr.layer)||1},displayOrder:m.displayOrder||0}),p(!0)},re=()=>{y(null),O(),p(!0)},O=()=>{S({name:"",label:"",labelAr:"",type:"text",imageType:"regular",required:!1,defaultValue:"",placeholder:"",placeholderAr:"",options:[],position:{x:50,y:50,snapToGrid:!1},style:{fontFamily:"Cairo",fontSize:24,fontWeight:"normal",color:"#000000",align:"center",verticalPosition:"middle",textShadow:{enabled:!1,color:"#ffffff",blur:5},imageMaxWidth:25,imageMaxHeight:25,imageBorder:!1,imageRounded:!1,layer:1},displayOrder:0}),C("")},J=m=>{if(m.preventDefault(),!f.name){n({title:"اسم الحقل مطلوب",variant:"destructive"});return}if(!f.label){n({title:"عنوان الحقل مطلوب",variant:"destructive"});return}x?Q.mutate(f):M.mutate(f)},X=m=>{confirm("هل أنت متأكد من حذف هذا الحقل؟")&&ie.mutate(m)},te=(m,E)=>{S(j=>({...j,position:{...j.position,[m]:E}}))},V=(m,E)=>{S(j=>({...j,style:{...j.style,[m]:E}}))},xe=()=>{D.trim()&&(S(m=>({...m,options:[...m.options||[],D.trim()]})),C(""))},oe=m=>{S(E=>{var j;return{...E,options:(j=E.options)==null?void 0:j.filter((z,K)=>K!==m)}})},Oe=Dr({mutationFn:async m=>{const E=m.map((j,z)=>({id:j.id,displayOrder:z}));return Ke("PUT",`/api/admin/template-fields/${e}/order`,{fields:E})},onSuccess:()=>{n({title:"تم تحديث ترتيب الحقول بنجاح"}),F()},onError:m=>{n({title:"حدث خطأ",description:m.message||"حدث خطأ أثناء تحديث ترتيب الحقول",variant:"destructive"})}}),$e=m=>{Oe.mutate(m)};return B||T?l.jsx("div",{className:"container py-8 flex justify-center",children:l.jsx(Ge,{className:"h-8 w-8 animate-spin"})}):a?l.jsxs("div",{className:"container py-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"حقول القالب"}),l.jsx("p",{className:"text-muted-foreground",children:a.title})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(L,{variant:"outline",onClick:()=>t("/admin/templates"),children:"العودة للقوالب"}),l.jsxs(L,{variant:"outline",onClick:()=>d(!0),className:"flex items-center gap-2",children:[l.jsx(rl,{className:"h-4 w-4"}),"نسخ الحقول"]}),l.jsxs(L,{variant:"outline",onClick:()=>g(!0),className:"flex items-center gap-2",children:[l.jsx(Si,{className:"h-4 w-4"}),"تعديل مواضع الحقول"]}),l.jsxs(L,{variant:"outline",onClick:()=>{console.log("محرر الطبقات التقليدي - معرف القالب:",e),t(`/template-editor-with-layers/${e}`)},className:"flex items-center gap-2",children:[l.jsx(tl,{className:"h-4 w-4"}),"محرر الطبقات التقليدي"]}),l.jsxs(L,{variant:"outline",onClick:()=>t(`/advanced-layer-editor/${e}`),className:"flex items-center gap-2",children:[l.jsx(nl,{className:"h-4 w-4"}),"محرر الطبقات المتقدم"]}),l.jsxs(L,{variant:"outline",onClick:()=>b(!0),className:"flex items-center gap-2",children:[l.jsx(ol,{className:"h-4 w-4"}),"ترتيب الحقول"]}),l.jsx(L,{onClick:re,children:"إضافة حقل جديد"})]})]}),l.jsx(ll,{open:v,onOpenChange:d,sourceTemplateId:parseInt(e),onSuccess:F}),l.jsx(kp,{isOpen:h,onClose:()=>b(!1),fields:o,onSave:$e,title:"ترتيب حقول القالب",description:"قم بسحب وإفلات الحقول لتغيير ترتيبها، أو استخدم الأسهم لتحريك الحقول لأعلى أو لأسفل."}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["حقول القالب (",o.length,")"]}),o.length>0?l.jsx("div",{className:"border rounded-md divide-y",children:o.map(m=>l.jsxs("div",{className:"p-4 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:m.label}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.name," - ",m.type,m.type==="image"&&m.imageType&&` (${m.imageType==="logo"?"شعار":m.imageType==="signature"?"توقيع":"صورة"})`,m.required&&" (إلزامي)"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(L,{variant:"outline",size:"sm",onClick:()=>q(m),children:"تعديل"}),l.jsx(L,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>X(m.id),children:"حذف"})]})]},m.id))}):l.jsxs("div",{className:"border rounded-md p-8 text-center",children:[l.jsx("p",{className:"text-muted-foreground",children:"لا توجد حقول لهذا القالب"}),l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'أضف حقولًا باستخدام زر "إضافة حقل جديد"'})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"معاينة القالب"}),l.jsx("div",{className:"border rounded-md bg-gray-100 p-4 text-center relative aspect-[3/4]",children:a.imageUrl?l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("img",{src:a.imageUrl,alt:a.title,className:"object-contain w-full h-full"}),o.map(m=>{var E,j,z,K,we,Ce,Ne,lr,sr,cr,dr,ur,pr,vr,fr,gr,mr;return m.type==="image"?l.jsx("div",{className:`absolute border-2 border-dashed border-green-500 rounded p-2 bg-green-500/20 flex items-center justify-center ${(E=m.style)!=null&&E.imageBorder?"ring-2 ring-gray-400":""} ${(j=m.style)!=null&&j.imageRounded?"rounded-full":"rounded-sm"}`,style:{top:`${((z=m.position)==null?void 0:z.y)||50}%`,left:`${((K=m.position)==null?void 0:K.x)||50}%`,transform:"translate(-50%, -50%)",width:`${((we=m.style)==null?void 0:we.imageMaxWidth)||25}%`,height:`${((Ce=m.style)==null?void 0:Ce.imageMaxHeight)||25}%`,maxWidth:"80%",maxHeight:"80%",zIndex:((Ne=m.style)==null?void 0:Ne.layer)||1},children:l.jsxs("div",{className:"flex flex-col items-center justify-center",children:[l.jsx(Pa,{className:"h-12 w-12 text-green-500/70"}),l.jsx("span",{className:"text-sm font-medium mt-2",children:m.label}),l.jsxs("span",{className:"text-xs mt-1",children:[((lr=m.style)==null?void 0:lr.imageMaxWidth)||25,"% × ",((sr=m.style)==null?void 0:sr.imageMaxHeight)||25,"%"]})]})},m.id):l.jsx("div",{className:"absolute border-2 border-dashed border-blue-500 rounded p-2 bg-blue-500/20",style:{top:`${((cr=m.position)==null?void 0:cr.y)||50}%`,left:`${((dr=m.position)==null?void 0:dr.x)||50}%`,transform:"translate(-50%, -50%)",color:((ur=m.style)==null?void 0:ur.color)||"black",fontFamily:((pr=m.style)==null?void 0:pr.fontFamily)||"Cairo",fontSize:`${((vr=m.style)==null?void 0:vr.fontSize)||16}px`,fontWeight:((fr=m.style)==null?void 0:fr.fontWeight)||"normal",textAlign:((gr=m.style)==null?void 0:gr.align)||"center",minWidth:"100px",minHeight:"30px",zIndex:((mr=m.style)==null?void 0:mr.layer)||10},children:m.label},m.id)})]}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("p",{className:"text-muted-foreground",children:"لا توجد صورة للقالب"})})}),l.jsx("div",{className:"mt-4",children:l.jsx("p",{className:"text-sm text-muted-foreground",children:'انقر على "تعديل" لتغيير موضع وتنسيق الحقول على القالب'})})]})]}),l.jsx(Vt,{open:c,onOpenChange:p,children:l.jsxs(zt,{className:"max-w-4xl max-h-[90vh]",children:[l.jsx(Jt,{children:l.jsx(Kt,{children:x?"تعديل الحقل":"إضافة حقل جديد"})}),l.jsx(Di,{className:"max-h-[calc(90vh-160px)] pr-4",children:l.jsxs("form",{onSubmit:J,children:[l.jsxs(Yo,{defaultValue:"basic",children:[l.jsxs(Xo,{className:"grid grid-cols-4 mb-4",children:[l.jsx(Ur,{value:"basic",children:"معلومات أساسية"}),l.jsx(Ur,{value:"position",children:"الموضع"}),l.jsx(Ur,{value:"style",children:"المظهر"}),l.jsx(Ur,{value:"options",children:"خيارات إضافية"})]}),l.jsxs(qr,{value:"basic",className:"space-y-4 mt-2",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"name",children:"اسم الحقل (ID)"}),l.jsx(Y,{id:"name",value:f.name,onChange:m=>S({...f,name:m.target.value}),placeholder:"مثال: recipientName",required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"يستخدم هذا المعرف في الكود، استخدم حروف إنجليزية وأرقام فقط"})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"label",children:"عنوان الحقل"}),l.jsx(Y,{id:"label",value:f.label,onChange:m=>S({...f,label:m.target.value}),placeholder:"مثال: اسم المستلم",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"labelAr",children:"عنوان الحقل (بالعربية)"}),l.jsx(Y,{id:"labelAr",value:f.labelAr,onChange:m=>S({...f,labelAr:m.target.value}),placeholder:"مثال: اسم المستلم"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"type",children:"نوع الحقل"}),l.jsxs(Ye,{value:f.type||"text",onValueChange:m=>S({...f,type:m}),children:[l.jsx(Xe,{id:"type",children:l.jsx(Qe,{placeholder:"اختر نوع الحقل"})}),l.jsxs(Ze,{children:[l.jsx(k,{value:"text",children:"نص قصير"}),l.jsx(k,{value:"textarea",children:"نص طويل"}),l.jsx(k,{value:"number",children:"رقم"}),l.jsx(k,{value:"date",children:"تاريخ"}),l.jsx(k,{value:"time",children:"وقت"}),l.jsx(k,{value:"select",children:"قائمة منسدلة"}),l.jsx(k,{value:"radio",children:"خيارات متعددة"}),l.jsx(k,{value:"image",children:"صورة"})]})]})]}),f.type==="image"&&l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"imageType",children:"نوع الصورة"}),l.jsxs(Ye,{value:f.imageType||"regular",onValueChange:m=>S({...f,imageType:m}),children:[l.jsx(Xe,{id:"imageType",children:l.jsx(Qe,{placeholder:"اختر نوع الصورة"})}),l.jsxs(Ze,{children:[l.jsx(k,{value:"regular",children:"صورة عادية"}),l.jsx(k,{value:"logo",children:"شعار"}),l.jsx(k,{value:"signature",children:"توقيع"})]})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"يساعد تحديد نوع الصورة في تحسين طريقة عرضها وإدارتها"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"defaultValue",children:"القيمة الافتراضية"}),l.jsx(Y,{id:"defaultValue",value:f.defaultValue||"",onChange:m=>S({...f,defaultValue:m.target.value}),placeholder:"القيمة الافتراضية للحقل"})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"placeholder",children:"نص توضيحي"}),l.jsx(Y,{id:"placeholder",value:f.placeholder||"",onChange:m=>S({...f,placeholder:m.target.value}),placeholder:"مثال: أدخل اسم المستلم"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"placeholderAr",children:"نص توضيحي (بالعربية)"}),l.jsx(Y,{id:"placeholderAr",value:f.placeholderAr||"",onChange:m=>S({...f,placeholderAr:m.target.value}),placeholder:"مثال: أدخل اسم المستلم"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(De,{id:"required",checked:f.required,onCheckedChange:m=>S({...f,required:!!m})}),l.jsx(R,{htmlFor:"required",children:"حقل إلزامي"})]})]})]}),l.jsx(qr,{value:"position",className:"mt-2",children:l.jsx("div",{className:"grid gap-6",children:l.jsxs("div",{className:"template-editor-controls",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-4",children:[l.jsx("div",{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{children:"محاذاة عامودية"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx(L,{type:"button",variant:((me=f.style)==null?void 0:me.verticalPosition)==="top"?"default":"outline",className:"w-full",onClick:()=>V("verticalPosition","top"),children:"أعلى"}),l.jsx(L,{type:"button",variant:((Re=f.style)==null?void 0:Re.verticalPosition)==="middle"?"default":"outline",className:"w-full",onClick:()=>V("verticalPosition","middle"),children:"وسط"}),l.jsx(L,{type:"button",variant:((Be=f.style)==null?void 0:Be.verticalPosition)==="bottom"?"default":"outline",className:"w-full",onClick:()=>V("verticalPosition","bottom"),children:"أسفل"})]})]})}),l.jsx("div",{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{children:"محاذاة أفقية"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx(L,{type:"button",variant:((Te=f.style)==null?void 0:Te.align)==="right"?"default":"outline",className:"w-full",onClick:()=>V("align","right"),children:"يمين"}),l.jsx(L,{type:"button",variant:((ke=f.style)==null?void 0:ke.align)==="center"?"default":"outline",className:"w-full",onClick:()=>V("align","center"),children:"وسط"}),l.jsx(L,{type:"button",variant:((ye=f.style)==null?void 0:ye.align)==="left"?"default":"outline",className:"w-full",onClick:()=>V("align","left"),children:"يسار"})]})]})})]}),l.jsx(R,{className:"mb-2",children:"الموضع"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsx("div",{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx(R,{htmlFor:"x",className:"flex-shrink-0",children:"الموضع الأفقي (x)"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(L,{type:"button",variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>{var m;return te("x",(((m=f.position)==null?void 0:m.x)||50)-1)},children:l.jsx(Aa,{className:"h-3 w-3"})}),l.jsx(L,{type:"button",variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>{var m;return te("x",(((m=f.position)==null?void 0:m.x)||50)+1)},children:l.jsx(Ea,{className:"h-3 w-3"})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(hr,{id:"x",min:0,max:100,step:1,value:[((He=f.position)==null?void 0:He.x)||50],onValueChange:([m])=>te("x",m),className:"mt-2"}),((ir=f.position)==null?void 0:ir.snapToGrid)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute top-[25%] left-2 text-xs bg-black/70 text-white px-1 rounded -translate-y-1/2 pointer-events-none",children:"25%"}),l.jsx("div",{className:"absolute top-[50%] left-2 text-xs bg-black/70 text-white px-1 rounded -translate-y-1/2 pointer-events-none",children:"50%"}),l.jsx("div",{className:"absolute top-[75%] left-2 text-xs bg-black/70 text-white px-1 rounded -translate-y-1/2 pointer-events-none",children:"75%"})]})]}),l.jsxs("div",{className:"flex mt-1 justify-between items-center",children:[l.jsx("span",{className:"text-xs text-muted-foreground",children:"0%"}),l.jsx(Y,{type:"number",min:0,max:100,value:((Ue=f.position)==null?void 0:Ue.x)||50,onChange:m=>te("x",parseInt(m.target.value)||0),className:"w-16 h-7 text-xs"}),l.jsx("span",{className:"text-xs text-muted-foreground",children:"100%"})]})]})}),l.jsx("div",{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx(R,{htmlFor:"y",className:"flex-shrink-0",children:"الموضع العامودي (y)"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(L,{type:"button",variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>{var m;return te("y",(((m=f.position)==null?void 0:m.y)||50)-1)},children:l.jsx(Aa,{className:"h-3 w-3"})}),l.jsx(L,{type:"button",variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>{var m;return te("y",(((m=f.position)==null?void 0:m.y)||50)+1)},children:l.jsx(Ea,{className:"h-3 w-3"})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(hr,{id:"y",min:0,max:100,step:1,value:[((Me=f.position)==null?void 0:Me.y)||50],onValueChange:([m])=>te("y",m),className:"mt-2"}),((or=f.position)==null?void 0:or.snapToGrid)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute top-[25%] right-2 text-xs bg-black/70 text-white px-1 rounded -translate-y-1/2 pointer-events-none",children:"25%"}),l.jsx("div",{className:"absolute top-[50%] right-2 text-xs bg-black/70 text-white px-1 rounded -translate-y-1/2 pointer-events-none",children:"50%"}),l.jsx("div",{className:"absolute top-[75%] right-2 text-xs bg-black/70 text-white px-1 rounded -translate-y-1/2 pointer-events-none",children:"75%"})]})]}),l.jsxs("div",{className:"flex mt-1 justify-between items-center",children:[l.jsx("span",{className:"text-xs text-muted-foreground",children:"0%"}),l.jsx(Y,{type:"number",min:0,max:100,value:((qe=f.position)==null?void 0:qe.y)||50,onChange:m=>te("y",parseInt(m.target.value)||0),className:"w-16 h-7 text-xs"}),l.jsx("span",{className:"text-xs text-muted-foreground",children:"100%"})]})]})})]}),l.jsx("div",{className:"mt-4 flex items-center space-x-2",children:l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(De,{id:"snapToGrid",checked:((Ve=f.position)==null?void 0:Ve.snapToGrid)||!1,onCheckedChange:m=>{S(E=>({...E,position:{...E.position,snapToGrid:!!m}}))}}),l.jsx(R,{htmlFor:"snapToGrid",className:"mx-2",children:"محاذاة تلقائية للشبكة"})]}),l.jsx("span",{className:"text-xs text-muted-foreground pr-7",children:"المحاذاة التلقائية تساعدك على وضع العناصر بدقة بنسب 25%، 50%، 75%"})]})}),l.jsxs("div",{className:"mt-6 border rounded p-4 bg-gray-50",children:[l.jsx("h3",{className:"text-lg font-medium mb-3",children:"معاينة الموضع"}),l.jsx("div",{className:"relative max-h-[300px] aspect-[3/4] mx-auto bg-gray-100 border",style:{width:"220px"},children:a.imageUrl?l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("img",{src:a.imageUrl,alt:a.title,className:"object-contain w-full h-full"}),l.jsx("div",{className:"absolute border-2 border-dashed border-primary rounded p-2 bg-primary/20",style:{top:`${((Hr=f.position)==null?void 0:Hr.y)||50}%`,left:`${((Se=f.position)==null?void 0:Se.x)||50}%`,transform:"translate(-50%, -50%)",color:((ze=f.style)==null?void 0:ze.color)||"black",fontFamily:((Nn=f.style)==null?void 0:Nn.fontFamily)||"Cairo",fontSize:`${((In=f.style)==null?void 0:In.fontSize)||16}px`,fontWeight:((jn=f.style)==null?void 0:jn.fontWeight)||"normal",textAlign:((Pn=f.style)==null?void 0:Pn.align)||"center",minWidth:"100px",minHeight:"30px",zIndex:10},children:f.label||"مثال"}),o.filter(m=>m.id!==f.id).map(m=>{var E,j,z,K,we,Ce,Ne;return l.jsx("div",{className:"absolute border-2 border-dashed border-blue-500/50 rounded p-2 bg-blue-500/10",style:{top:`${((E=m.position)==null?void 0:E.y)||50}%`,left:`${((j=m.position)==null?void 0:j.x)||50}%`,transform:"translate(-50%, -50%)",color:((z=m.style)==null?void 0:z.color)||"black",fontFamily:((K=m.style)==null?void 0:K.fontFamily)||"Cairo",fontSize:`${((we=m.style)==null?void 0:we.fontSize)||16}px`,fontWeight:((Ce=m.style)==null?void 0:Ce.fontWeight)||"normal",textAlign:((Ne=m.style)==null?void 0:Ne.align)||"center",minWidth:"100px",minHeight:"30px",opacity:.6,zIndex:5},children:m.label},m.id)})]}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("p",{className:"text-muted-foreground",children:"لا توجد صورة للقالب"})})}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"استخدم أزرار التحكم بالأعلى لتغيير موضع الحقل"})]})]})})}),l.jsx(qr,{value:"style",className:"mt-2",children:l.jsx("div",{className:"grid gap-6",children:l.jsx("div",{className:"template-editor-controls",children:l.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{children:"أنماط النص"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"fontWeight",children:"وزن الخط"}),l.jsxs(Ye,{value:((En=f.style)==null?void 0:En.fontWeight)||"normal",onValueChange:m=>S({...f,style:{...f.style,fontWeight:m}}),children:[l.jsx(Xe,{id:"fontWeight",children:l.jsx(Qe,{placeholder:"اختر وزن الخط"})}),l.jsxs(Ze,{children:[l.jsx(k,{value:"normal",children:"عادي"}),l.jsx(k,{value:"bold",children:"عريض"}),l.jsx(k,{value:"100",children:"رفيع جداً (100)"}),l.jsx(k,{value:"300",children:"رفيع (300)"}),l.jsx(k,{value:"500",children:"متوسط (500)"}),l.jsx(k,{value:"700",children:"عريض (700)"}),l.jsx(k,{value:"900",children:"عريض جداً (900)"})]})]})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"fontSize",children:"حجم الخط"}),l.jsx(Y,{id:"fontSize",type:"number",min:"12",max:"72",value:((An=f.style)==null?void 0:An.fontSize)||24,onChange:m=>S({...f,style:{...f.style,fontSize:Number(m.target.value)}})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"textWidth",children:"عرض النص (بكسل)"}),l.jsx(Y,{id:"textWidth",type:"number",min:"100",max:"1000",value:((On=f.style)==null?void 0:On.width)||200,onChange:m=>S({...f,style:{...f.style,width:Number(m.target.value)}})})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"textHeight",children:"ارتفاع النص (بكسل)"}),l.jsx(Y,{id:"textHeight",type:"number",min:"30",max:"300",value:((Rn=f.style)==null?void 0:Rn.height)||50,onChange:m=>S({...f,style:{...f.style,height:Number(m.target.value)}})})]})]}),l.jsxs("div",{className:"grid gap-2 mt-4",children:[l.jsx(R,{htmlFor:"fontFamily",children:"نوع الخط"}),l.jsxs(Ye,{value:((Bn=f.style)==null?void 0:Bn.fontFamily)||"Cairo",onValueChange:m=>S({...f,style:{...f.style,fontFamily:m}}),children:[l.jsx(Xe,{id:"fontFamily",children:l.jsx(Qe,{placeholder:"اختر نوع الخط"})}),l.jsxs(Ze,{children:[l.jsx(k,{value:"Cairo",children:"Cairo"}),l.jsx(k,{value:"Tajawal",children:"Tajawal"}),l.jsx(k,{value:"Amiri",children:"Amiri"}),l.jsx(k,{value:"Arial",children:"Arial"}),l.jsx(k,{value:"sans-serif",children:"Sans-serif"})]})]})]}),l.jsxs("div",{className:"grid gap-2 mt-2",children:[l.jsx(R,{htmlFor:"textColor",children:"لون النص"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Y,{id:"textColor",type:"color",className:"w-12 h-9 p-1",value:((Tn=f.style)==null?void 0:Tn.color)||"#000000",onChange:m=>S({...f,style:{...f.style,color:m.target.value}})}),l.jsx(Y,{value:((Mn=f.style)==null?void 0:Mn.color)||"#000000",onChange:m=>S({...f,style:{...f.style,color:m.target.value}}),placeholder:"#000000",className:"flex-1"})]})]}),l.jsxs("div",{className:"grid gap-2 mt-2",children:[l.jsx(R,{htmlFor:"textAlign",children:"محاذاة النص"}),l.jsxs(Ye,{value:((Fn=f.style)==null?void 0:Fn.align)||"center",onValueChange:m=>S({...f,style:{...f.style,align:m}}),children:[l.jsx(Xe,{id:"textAlign",children:l.jsx(Qe,{placeholder:"اختر محاذاة النص"})}),l.jsxs(Ze,{children:[l.jsx(k,{value:"center",children:"وسط"}),l.jsx(k,{value:"right",children:"يمين"}),l.jsx(k,{value:"left",children:"يسار"})]})]})]})]}),l.jsxs("div",{className:"mt-4 border p-3 rounded-md",children:[l.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-3",children:[l.jsx(De,{id:"shadowEnabled",checked:((Gn=(Ln=f.style)==null?void 0:Ln.textShadow)==null?void 0:Gn.enabled)||!1,onCheckedChange:m=>{var E,j,z,K;return S({...f,style:{...f.style,textShadow:{enabled:!!m,color:((j=(E=f.style)==null?void 0:E.textShadow)==null?void 0:j.color)||"#ffffff",blur:((K=(z=f.style)==null?void 0:z.textShadow)==null?void 0:K.blur)||5}}})}}),l.jsx(R,{htmlFor:"shadowEnabled",className:"text-sm",children:"تفعيل ظل النص"})]}),(($n=(Wn=f.style)==null?void 0:Wn.textShadow)==null?void 0:$n.enabled)&&l.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[l.jsxs("div",{className:"grid gap-1",children:[l.jsx(R,{htmlFor:"shadowColor",className:"text-xs",children:"لون الظل"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Y,{id:"shadowColor",type:"color",className:"w-8 h-8 p-1",value:((Hn=(kn=f.style)==null?void 0:kn.textShadow)==null?void 0:Hn.color)||"#ffffff",onChange:m=>{var E,j,z,K;return S({...f,style:{...f.style,textShadow:{enabled:((j=(E=f.style)==null?void 0:E.textShadow)==null?void 0:j.enabled)||!1,color:m.target.value,blur:((K=(z=f.style)==null?void 0:z.textShadow)==null?void 0:K.blur)||5}}})}}),l.jsx(Y,{className:"text-xs h-8",value:((qn=(Un=f.style)==null?void 0:Un.textShadow)==null?void 0:qn.color)||"#ffffff",onChange:m=>{var E,j,z,K;return S({...f,style:{...f.style,textShadow:{enabled:((j=(E=f.style)==null?void 0:E.textShadow)==null?void 0:j.enabled)||!1,color:m.target.value,blur:((K=(z=f.style)==null?void 0:z.textShadow)==null?void 0:K.blur)||5}}})}})]})]}),l.jsxs("div",{className:"grid gap-1",children:[l.jsx(R,{htmlFor:"shadowBlur",className:"text-xs",children:"تمويه الظل"}),l.jsx(Y,{id:"shadowBlur",type:"number",min:"0",max:"20",className:"h-8",value:((zn=(Vn=f.style)==null?void 0:Vn.textShadow)==null?void 0:zn.blur)||5,onChange:m=>{var E,j,z,K;return S({...f,style:{...f.style,textShadow:{enabled:((j=(E=f.style)==null?void 0:E.textShadow)==null?void 0:j.enabled)||!1,color:((K=(z=f.style)==null?void 0:z.textShadow)==null?void 0:K.color)||"#ffffff",blur:Number(m.target.value)}}})}})]})]})]})]}),f.type==="image"&&l.jsxs("div",{className:"mt-6 border rounded-md p-4 bg-blue-50",children:[l.jsx("h3",{className:"text-lg font-medium mb-3 text-blue-700",children:"خصائص الصورة"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"imageMaxWidth",children:"عرض الصورة (% من القالب)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex-1",children:l.jsx(hr,{id:"imageMaxWidth",min:1,max:100,step:1,value:[((Jn=f.style)==null?void 0:Jn.imageMaxWidth)||25],onValueChange:([m])=>V("imageMaxWidth",m)})}),l.jsx(Y,{type:"number",min:1,max:100,className:"w-20",value:((Kn=f.style)==null?void 0:Kn.imageMaxWidth)||25,onChange:m=>V("imageMaxWidth",Number(m.target.value))})]})]}),l.jsxs("div",{className:"grid gap-2 mt-4",children:[l.jsx(R,{htmlFor:"imageMaxHeight",children:"ارتفاع الصورة (% من القالب)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex-1",children:l.jsx(hr,{id:"imageMaxHeight",min:1,max:100,step:1,value:[((Yn=f.style)==null?void 0:Yn.imageMaxHeight)||25],onValueChange:([m])=>V("imageMaxHeight",m)})}),l.jsx(Y,{type:"number",min:1,max:100,className:"w-20",value:((Xn=f.style)==null?void 0:Xn.imageMaxHeight)||25,onChange:m=>V("imageMaxHeight",Number(m.target.value))})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[l.jsx(De,{id:"imageBorder",checked:((Qn=f.style)==null?void 0:Qn.imageBorder)||!1,onCheckedChange:m=>V("imageBorder",!!m)}),l.jsx(R,{htmlFor:"imageBorder",className:"text-sm",children:"إضافة إطار للصورة"})]}),l.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[l.jsx(De,{id:"imageRounded",checked:((Zn=f.style)==null?void 0:Zn.imageRounded)||!1,onCheckedChange:m=>V("imageRounded",!!m)}),l.jsx(R,{htmlFor:"imageRounded",className:"text-sm",children:"جعل الصورة دائرية"})]})]}),l.jsxs("div",{className:"mt-4 border border-blue-200 bg-blue-100/50 p-3 rounded-md",children:[l.jsx(R,{htmlFor:"layer",className:"block mb-2 text-blue-800",children:"طبقة العنصر (Layer)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex-1",children:l.jsx(hr,{id:"layer",min:1,max:10,step:1,value:[((_n=f.style)==null?void 0:_n.layer)||1],onValueChange:([m])=>V("layer",m)})}),l.jsx("div",{className:"bg-white rounded-md border px-2 py-1 w-12 text-center text-lg font-medium",children:((ea=f.style)==null?void 0:ea.layer)||1})]}),l.jsx("p",{className:"text-xs mt-2 text-blue-700",children:"القيمة الأعلى تعني أن العنصر سيظهر في المقدمة فوق العناصر الأخرى."})]})]})]}),l.jsxs("div",{className:"mt-4 bg-white p-3 rounded-md border",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium",children:"معاينة حجم الصورة"}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"المساحة المتوقعة التي ستشغلها الصورة على القالب"})]}),l.jsxs("div",{className:"text-sm",children:[((ra=f.style)==null?void 0:ra.imageMaxWidth)||25,"% × ",((ta=f.style)==null?void 0:ta.imageMaxHeight)||25,"% من أبعاد القالب"]})]}),l.jsx("div",{className:"flex items-center justify-center mt-3",children:l.jsx("div",{className:`relative ${(na=f.style)!=null&&na.imageRounded?"rounded-full overflow-hidden":"rounded-md"}`,style:{width:Math.min(200,(((aa=f.style)==null?void 0:aa.imageMaxWidth)||25)*2)+"px",height:Math.min(200,(((ia=f.style)==null?void 0:ia.imageMaxHeight)||25)*2)+"px",border:(oa=f.style)!=null&&oa.imageBorder?"2px solid #64748b":"none",background:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Pa,{className:"text-gray-400",size:Math.min(60,(((la=f.style)==null?void 0:la.imageMaxWidth)||25)*.8)})})})]})]}),l.jsxs("div",{children:[l.jsx(R,{className:"mb-2 block",children:"معاينة التنسيق"}),l.jsxs("div",{className:"relative mt-2 border rounded-md bg-gray-100 template-editor-container",children:[l.jsx("div",{className:"absolute inset-0",children:a!=null&&a.imageUrl?l.jsx("img",{src:a.imageUrl,alt:a.title,className:"object-contain w-full h-full"}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("p",{className:"text-muted-foreground",children:"لا توجد صورة للقالب"})})}),l.jsx("div",{className:"absolute",style:{top:`${((sa=f.position)==null?void 0:sa.y)||50}%`,left:`${((ca=f.position)==null?void 0:ca.x)||50}%`,transform:"translate(-50%, -50%)",color:((da=f.style)==null?void 0:da.color)||"black",fontFamily:((ua=f.style)==null?void 0:ua.fontFamily)||"Cairo",fontSize:`${((pa=f.style)==null?void 0:pa.fontSize)||16}px`,fontWeight:((va=f.style)==null?void 0:va.fontWeight)||"normal",textAlign:((fa=f.style)==null?void 0:fa.align)||"center",textShadow:(ma=(ga=f.style)==null?void 0:ga.textShadow)!=null&&ma.enabled?`0 0 ${((ba=(ha=f.style)==null?void 0:ha.textShadow)==null?void 0:ba.blur)||5}px ${((ya=(xa=f.style)==null?void 0:xa.textShadow)==null?void 0:ya.color)||"#ffffff"}`:"none",padding:"8px 16px",borderRadius:"4px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"2px dashed rgba(59, 130, 246, 0.7)",minWidth:"100px",minHeight:"30px",zIndex:10},children:f.label||"عنوان الحقل"})]}),l.jsxs("div",{className:"mt-8",children:[l.jsx("h3",{className:"text-sm font-medium mb-2",children:"نصائح لتصميم أفضل"}),l.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsx("li",{children:"• تأكد من أن لون النص مناسب للخلفية لتجنب صعوبة القراءة"}),l.jsx("li",{children:"• استخدم ظل النص عندما يكون النص غير واضح على الخلفية"}),l.jsx("li",{children:"• اختر حجم خط مناسب لكمية النص - الخط الكبير للنصوص القصيرة"}),l.jsx("li",{children:"• الخط الصغير قد يصعب قراءته في الصور المشاركة عبر الجوال"})]})]})]})]})})})}),l.jsx(qr,{value:"options",className:"mt-2",children:f.type==="image"?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"rounded-md border p-4 bg-muted/30",children:[l.jsx("h3",{className:"text-md font-medium mb-2",children:"إعدادات حقل الصورة"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"imageMaxWidth",children:"عرض الصورة (% من القالب)"}),l.jsxs("div",{className:"grid grid-flow-col gap-2 items-center",children:[l.jsx(Y,{id:"imageMaxWidth",type:"number",min:"1",max:"100",value:((Da=f.style)==null?void 0:Da.imageMaxWidth)||25,onChange:m=>S({...f,style:{...f.style,imageMaxWidth:parseInt(m.target.value)||25}})}),l.jsx("span",{className:"text-lg font-semibold",children:"%"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"نسبة مئوية من عرض القالب"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"imageMaxHeight",children:"ارتفاع الصورة (% من القالب)"}),l.jsxs("div",{className:"grid grid-flow-col gap-2 items-center",children:[l.jsx(Y,{id:"imageMaxHeight",type:"number",min:"1",max:"100",value:((Sa=f.style)==null?void 0:Sa.imageMaxHeight)||25,onChange:m=>S({...f,style:{...f.style,imageMaxHeight:parseInt(m.target.value)||25}})}),l.jsx("span",{className:"text-lg font-semibold",children:"%"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"نسبة مئوية من ارتفاع القالب"})]})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{children:"خصائص إضافية"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(De,{id:"imageBorder",checked:((wa=f.style)==null?void 0:wa.imageBorder)||!1,onCheckedChange:m=>S({...f,style:{...f.style,imageBorder:!!m}})}),l.jsx(R,{htmlFor:"imageBorder",children:"إطار للصورة"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(De,{id:"imageRounded",checked:((Ca=f.style)==null?void 0:Ca.imageRounded)||!1,onCheckedChange:m=>S({...f,style:{...f.style,imageRounded:!!m}})}),l.jsx(R,{htmlFor:"imageRounded",children:"حواف مستديرة"})]})]})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx(R,{htmlFor:"imageLayer",children:"ترتيب الطبقة (z-index)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Y,{id:"imageLayer",type:"number",min:"1",max:"100",value:((Na=f.style)==null?void 0:Na.layer)||1,onChange:m=>S({...f,style:{...f.style,layer:parseInt(m.target.value)||1}})}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"الرقم الأكبر = طبقة أعلى"})]})]})]})]})}):f.type==="select"||f.type==="radio"?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(R,{children:"الخيارات"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["عدد الخيارات: ",((Ia=f.options)==null?void 0:Ia.length)||0]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Y,{value:D,onChange:m=>C(m.target.value),placeholder:"أضف خيار جديد"}),l.jsx(L,{type:"button",variant:"secondary",onClick:xe,children:"إضافة"})]}),l.jsx("div",{className:"border rounded-md",children:(ja=f.options)!=null&&ja.length?l.jsx("div",{className:"p-1 divide-y",children:f.options.map((m,E)=>l.jsxs("div",{className:"flex items-center justify-between py-2 px-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm font-medium",children:[E+1,"."]}),l.jsx("span",{children:m})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(L,{type:"button",variant:"ghost",size:"icon",onClick:()=>{if(E>0){const j=[...f.options];[j[E],j[E-1]]=[j[E-1],j[E]],S({...f,options:j})}},disabled:E===0,children:l.jsx(al,{className:"h-4 w-4"})}),l.jsx(L,{type:"button",variant:"ghost",size:"icon",onClick:()=>{if(E<f.options.length-1){const j=[...f.options];[j[E],j[E+1]]=[j[E+1],j[E]],S({...f,options:j})}},disabled:E===f.options.length-1,children:l.jsx(Ko,{className:"h-4 w-4"})}),l.jsx(L,{type:"button",variant:"ghost",size:"icon",onClick:()=>oe(E),className:"text-destructive hover:text-destructive/90",children:l.jsx(il,{className:"h-4 w-4"})})]})]},E))}):l.jsxs("div",{className:"py-8 text-center",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد خيارات حتى الآن"}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"أضف خيارات للحقل باستخدام النموذج أعلاه"})]})})]}):l.jsxs("div",{className:"py-8 text-center",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"لا توجد خيارات متاحة لهذا النوع من الحقول"}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"الخيارات متاحة فقط لحقول القوائم المنسدلة والخيارات المتعددة"})]})})]}),l.jsx("div",{className:"mt-6 border-t pt-4",children:l.jsx(Xr,{children:l.jsxs(L,{type:"submit",className:"w-full sm:w-auto",disabled:M.isPending||Q.isPending,children:[(M.isPending||Q.isPending)&&l.jsx(Ge,{className:"ml-2 h-4 w-4 animate-spin"}),x?"تحديث الحقل":"إضافة الحقل"]})})})]})})]})}),l.jsx(_o,{isOpen:u,onClose:()=>g(!1),template:a,fields:o,onSave:m=>{const E=m.map(j=>Ke("PUT",`/api/admin/template-fields/${j.id}`,{name:j.name,label:j.label,labelAr:j.labelAr||null,type:j.type||"text",required:!!j.required,defaultValue:j.defaultValue||null,placeholder:j.placeholder||null,placeholderAr:j.placeholderAr||null,options:j.options?JSON.parse(JSON.stringify(j.options)):[],position:j.position?JSON.parse(JSON.stringify(j.position)):{},style:j.style?JSON.parse(JSON.stringify(j.style)):{},displayOrder:j.displayOrder||0,templateId:parseInt(e)}));Promise.all(E).then(()=>{n({title:"تم تحديث مواضع الحقول بنجاح",description:"تم ضبط مواقع الحقول على القالب"}),F()}).catch(j=>{n({title:"حدث خطأ",description:j.message||"حدث خطأ أثناء تحديث مواضع الحقول",variant:"destructive"})})}})]}):l.jsx("div",{className:"container py-8",children:l.jsx("p",{children:"لم يتم العثور على القالب"})})}export{Sv as default};
