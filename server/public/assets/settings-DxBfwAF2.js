import{n as me,h as Te,r,b as ne,i as F,j as e,c as b,C as h,s as p,t as u,v as g,d as j,B as y,M as De,Y as k,Z as U,_ as ce}from"./index-DoMHCGG2.js";import{I as l}from"./input-COMsjQRu.js";import{L as a}from"./label-DSWK9Bhr.js";import{S as d}from"./switch-DKvoDZdm.js";import{D as Ke,b as Pe,c as Me,d as Re,e as Ee,f as Ue}from"./dialog-fsPDLJiu.js";import{T as Oe,a as Le,b as M,c as R}from"./tabs-CKJmMpcu.js";import{T as re}from"./textarea-C01GBzJv.js";import{S as O}from"./save-CRRscGsZ.js";import{P as J}from"./panels-top-left-Bk9o9okL.js";import{L as de}from"./layout-grid-BgxHSeuv.js";import{R as Be}from"./refresh-cw-sltvKsd-.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=me("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=me("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);function Xe(){const{toast:t}=Te(),[oe,xe]=r.useState("general");r.useState(!1),r.useState(!1);const[X,$]=r.useState(!1),[ee,se]=r.useState(!1),[ae,ie]=r.useState(!1),[he,L]=r.useState(!1),[N,pe]=r.useState(null),{data:v,isLoading:A}=ne({queryKey:["/api/admin/settings"],queryFn:ce({})}),{data:B,isLoading:le}=ne({queryKey:["/api/display-settings"],queryFn:ce({})}),I=F({mutationFn:async s=>await k("POST","/api/display-settings",s),onSuccess:()=>{U.invalidateQueries({queryKey:["/api/display-settings"]}),t({title:"تم حفظ إعدادات العرض بنجاح"})},onError:s=>{t({title:"فشل حفظ إعدادات العرض",description:s.message,variant:"destructive"})}}),q=F({mutationFn:async s=>await k("PUT","/api/admin/settings/general",s),onSuccess:()=>{U.invalidateQueries({queryKey:["/api/admin/settings"]}),t({title:"تم حفظ الإعدادات العامة بنجاح"})},onError:s=>{t({title:"فشل حفظ الإعدادات",description:s.message,variant:"destructive"})}}),G=F({mutationFn:async s=>await k("PUT","/api/admin/settings/email",s),onSuccess:()=>{U.invalidateQueries({queryKey:["/api/admin/settings"]}),t({title:"تم حفظ إعدادات البريد الإلكتروني بنجاح"})},onError:s=>{t({title:"فشل حفظ إعدادات البريد الإلكتروني",description:s.message,variant:"destructive"})}}),Q=F({mutationFn:async s=>await k("PUT","/api/admin/settings/storage",s),onSuccess:()=>{U.invalidateQueries({queryKey:["/api/admin/settings"]}),t({title:"تم حفظ إعدادات التخزين بنجاح"})},onError:s=>{t({title:"فشل حفظ إعدادات التخزين",description:s.message,variant:"destructive"})}}),V=F({mutationFn:async s=>await k("PUT","/api/admin/settings/security",s),onSuccess:()=>{U.invalidateQueries({queryKey:["/api/admin/settings"]}),t({title:"تم حفظ إعدادات الأمان بنجاح"})},onError:s=>{t({title:"فشل حفظ إعدادات الأمان",description:s.message,variant:"destructive"})}}),ue=F({mutationFn:async()=>await k("POST","/api/admin/maintenance/clear-cache"),onSuccess:()=>{t({title:"تم مسح ذاكرة التخزين المؤقت بنجاح"})},onError:s=>{t({title:"فشل مسح ذاكرة التخزين المؤقت",description:s.message,variant:"destructive"})}}),ge=F({mutationFn:async()=>await k("POST","/api/admin/maintenance/purge-uploads"),onSuccess:()=>{t({title:"تم تنظيف الملفات المرفوعة بنجاح"})},onError:s=>{t({title:"فشل تنظيف الملفات المرفوعة",description:s.message,variant:"destructive"})}}),je=F({mutationFn:async()=>await k("POST","/api/admin/maintenance/restart-server"),onSuccess:()=>{t({title:"تم إعادة تشغيل الخادم بنجاح",description:"قد يستغرق الاتصال بالخادم بضع دقائق"})},onError:s=>{t({title:"فشل إعادة تشغيل الخادم",description:s.message,variant:"destructive"})}}),z=F({mutationFn:async s=>await k("POST","/api/admin/settings/test-email",{email:s}),onSuccess:()=>{t({title:"تم إرسال بريد إلكتروني تجريبي بنجاح"})},onError:s=>{t({title:"فشل إرسال البريد الإلكتروني التجريبي",description:s.message,variant:"destructive"})}}),[T,D]=r.useState({displayMode:"multi",templateViewMode:"multi-page",enableSocialFormats:!0,defaultSocialFormat:"instagram"}),[f,H]=r.useState({siteName:"",siteDescription:"",siteUrl:"",defaultLanguage:"ar",enableUserRegistration:!0,enableGuestCards:!0,autoDeleteDraftCards:!1,autoDeleteDraftCardsDays:30,cardQualityLevels:""}),[o,Z]=r.useState({emailSender:"",emailReplyTo:"",emailTemplateDir:"",sendgridApiKey:"",enableEmailNotifications:!0,emailNotifyOnNewUser:!0,emailNotifyOnNewCard:!1,emailNotifyOnNewCertificate:!0,emailFooterText:""}),[m,W]=r.useState({storageType:"local",localStoragePath:"/uploads",s3Bucket:"",s3Region:"",s3AccessKey:"",s3SecretKey:"",imageCacheTime:7,maxUploadSize:5,allowedFileTypes:""}),[x,Y]=r.useState({sessionTimeout:24,maxLoginAttempts:5,enableRecaptcha:!1,recaptchaSiteKey:"",recaptchaSecretKey:"",ipBlockingEnabled:!0,ipBlockingThreshold:10,ipBlockingTime:30}),ye=s=>{const{name:i,value:c,type:n}=s.target;D(w=>({...w,[i]:n==="checkbox"?s.target.checked:c}))},Ne=s=>{s.preventDefault(),console.log("Submitting display settings:",T),I.mutate(T)},te=s=>{D(i=>({...i,templateViewMode:s?"single-page":"multi-page"}))};r.useEffect(()=>{!A&&v&&(v.general&&H(v.general),v.email&&Z(v.email),v.storage&&W(v.storage),v.security&&Y(v.security)),!le&&B&&B.settings&&D(B.settings)},[A,v,le,B]);const K=s=>{const{name:i,value:c,type:n}=s.target;H(w=>({...w,[i]:n==="checkbox"?s.target.checked:c}))},E=s=>{const{name:i,value:c,type:n}=s.target;Z(w=>({...w,[i]:n==="checkbox"?s.target.checked:c}))},S=s=>{const{name:i,value:c,type:n}=s.target;W(w=>({...w,[i]:n==="checkbox"?s.target.checked:c}))},P=s=>{const{name:i,value:c,type:n}=s.target;Y(w=>({...w,[i]:n==="checkbox"?s.target.checked:c}))},C=(s,i,c)=>{i==="general"?H(n=>({...n,[c]:s})):i==="email"?Z(n=>({...n,[c]:s})):i==="storage"?W(n=>({...n,[c]:s})):i==="security"&&Y(n=>({...n,[c]:s}))},ve=s=>{s.preventDefault(),q.mutate(f)},fe=s=>{s.preventDefault(),G.mutate(o)},be=s=>{s.preventDefault(),Q.mutate(m)},Se=s=>{s.preventDefault(),V.mutate(x)},_=(s,i,c)=>{pe({title:s,description:i,action:c}),L(!0)},Ce=()=>{_("إعادة تشغيل الخادم","سيؤدي إعادة تشغيل الخادم إلى قطع الاتصال بجميع المستخدمين. هل أنت متأكد من رغبتك في المتابعة؟",()=>{$(!0),je.mutate(void 0,{onSettled:()=>$(!1)})})},we=()=>{_("مسح ذاكرة التخزين المؤقت","سيؤدي مسح ذاكرة التخزين المؤقت إلى إعادة تحميل جميع الملفات والبيانات. هل أنت متأكد من رغبتك في المتابعة؟",()=>{se(!0),ue.mutate(void 0,{onSettled:()=>se(!1)})})},Fe=()=>{_("تنظيف الملفات المرفوعة","سيؤدي تنظيف الملفات المرفوعة إلى حذف جميع الملفات غير المستخدمة. هل أنت متأكد من رغبتك في المتابعة؟",()=>{ie(!0),ge.mutate(void 0,{onSettled:()=>ie(!1)})})},ke=()=>{const s=o.emailSender||"test@example.com";z.mutate(s)};return A?e.jsx("div",{className:"container mx-auto py-10 flex justify-center",children:e.jsx(b,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"إعدادات النظام"}),e.jsx("p",{className:"text-muted-foreground",children:"إدارة إعدادات وتكوين النظام"})]})}),e.jsxs(Oe,{defaultValue:"general",value:oe,onValueChange:xe,className:"space-y-4",children:[e.jsxs(Le,{className:"grid grid-cols-6 w-full max-w-4xl",children:[e.jsx(M,{value:"general",children:"عام"}),e.jsx(M,{value:"display",children:"العرض"}),e.jsx(M,{value:"email",children:"البريد الإلكتروني"}),e.jsx(M,{value:"storage",children:"التخزين"}),e.jsx(M,{value:"security",children:"الأمان"}),e.jsx(M,{value:"maintenance",children:"الصيانة"})]}),e.jsx(R,{value:"general",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"الإعدادات العامة"}),e.jsx(g,{children:"إعدادات عامة للنظام"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"siteName",children:"اسم الموقع"}),e.jsx(l,{id:"siteName",name:"siteName",value:f.siteName,onChange:K})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"siteUrl",children:"رابط الموقع"}),e.jsx(l,{id:"siteUrl",name:"siteUrl",value:f.siteUrl,onChange:K})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"siteDescription",children:"وصف الموقع"}),e.jsx(re,{id:"siteDescription",name:"siteDescription",rows:3,value:f.siteDescription,onChange:K})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"defaultLanguage",children:"اللغة الافتراضية"}),e.jsxs("select",{id:"defaultLanguage",name:"defaultLanguage",value:f.defaultLanguage,onChange:K,className:"block w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background",children:[e.jsx("option",{value:"ar",children:"العربية"}),e.jsx("option",{value:"en",children:"English"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"autoDeleteDraftCardsDays",children:"أيام الاحتفاظ بالمسودات"}),e.jsx(l,{id:"autoDeleteDraftCardsDays",name:"autoDeleteDraftCardsDays",type:"number",min:"1",max:"365",value:f.autoDeleteDraftCardsDays,onChange:K})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"cardQualityLevels",children:"مستويات جودة البطاقات (مفصولة بفواصل)"}),e.jsx(l,{id:"cardQualityLevels",name:"cardQualityLevels",value:f.cardQualityLevels,onChange:K,placeholder:"low,medium,high"})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"enableUserRegistration",checked:f.enableUserRegistration,onCheckedChange:s=>C(s,"general","enableUserRegistration")}),e.jsx(a,{htmlFor:"enableUserRegistration",children:"تفعيل تسجيل المستخدمين"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"enableGuestCards",checked:f.enableGuestCards,onCheckedChange:s=>C(s,"general","enableGuestCards")}),e.jsx(a,{htmlFor:"enableGuestCards",children:"تفعيل بطاقات الزوار"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"autoDeleteDraftCards",checked:f.autoDeleteDraftCards,onCheckedChange:s=>C(s,"general","autoDeleteDraftCards")}),e.jsx(a,{htmlFor:"autoDeleteDraftCards",children:"حذف المسودات تلقائياً"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(y,{type:"submit",disabled:q.isPending,className:"min-w-[120px]",children:q.isPending?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"ml-2 h-4 w-4"}),"حفظ الإعدادات"]})})})]})})]})}),e.jsx(R,{value:"display",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(J,{className:"ml-2 h-5 w-5"}),"إعدادات العرض"]}),e.jsx(g,{children:"تخصيص واجهة المستخدم وطريقة عرض القوالب"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"نمط عرض التطبيق"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اختر نمط عرض التطبيق للمستخدمين"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4 flex flex-col space-y-4 items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-full h-32 bg-muted rounded-md",children:e.jsx(de,{className:"h-16 w-16 text-muted-foreground opacity-50"})}),e.jsx("h4",{className:"font-medium",children:"النمط التقليدي (متعدد الصفحات)"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"يتم تقسيم التطبيق إلى صفحات منفصلة"}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"displayMode-multi",checked:T.displayMode==="multi",onCheckedChange:s=>{s&&D(i=>({...i,displayMode:"multi"}))}}),e.jsx(a,{htmlFor:"displayMode-multi",children:"تفعيل"})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 flex flex-col space-y-4 items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-full h-32 bg-muted rounded-md",children:e.jsx(J,{className:"h-16 w-16 text-muted-foreground opacity-50"})}),e.jsx("h4",{className:"font-medium",children:"النمط الموحد (صفحة واحدة)"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"يتم عرض كل شيء في صفحة واحدة"}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"displayMode-single",checked:T.displayMode==="single",onCheckedChange:s=>{s&&D(i=>({...i,displayMode:"single"}))}}),e.jsx(a,{htmlFor:"displayMode-single",children:"تفعيل"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"طريقة عرض القوالب"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اختر طريقة عرض صفحة القوالب للمستخدمين"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4 flex flex-col space-y-4 items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-full h-32 bg-muted rounded-md",children:e.jsx(de,{className:"h-16 w-16 text-muted-foreground opacity-50"})}),e.jsx("h4",{className:"font-medium",children:"الطريقة التقليدية (متعدد الصفحات)"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"عرض القوالب ونموذج التعبئة والمعاينة في صفحات منفصلة"}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"templateViewMode-multi",checked:T.templateViewMode==="multi-page",onCheckedChange:s=>{s&&te(!1)}}),e.jsx(a,{htmlFor:"templateViewMode-multi",children:"تفعيل"})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 flex flex-col space-y-4 items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-full h-32 bg-muted rounded-md",children:e.jsx(J,{className:"h-16 w-16 text-muted-foreground opacity-50"})}),e.jsx("h4",{className:"font-medium",children:"الطريقة الموحدة (صفحة واحدة)"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"عرض القوالب ونموذج التعبئة والمعاينة في صفحة واحدة"}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"templateViewMode-single",checked:T.templateViewMode==="single-page",onCheckedChange:s=>{s&&te(!0)}}),e.jsx(a,{htmlFor:"templateViewMode-single",children:"تفعيل"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"إعدادات التنسيقات الاجتماعية"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إعدادات تصدير البطاقات لوسائل التواصل الاجتماعي"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"enableSocialFormats",checked:T.enableSocialFormats,onCheckedChange:s=>{D(i=>({...i,enableSocialFormats:s}))}}),e.jsx(a,{htmlFor:"enableSocialFormats",children:"تفعيل تنسيقات وسائل التواصل الاجتماعي"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"defaultSocialFormat",children:"التنسيق الافتراضي"}),e.jsxs("select",{id:"defaultSocialFormat",name:"defaultSocialFormat",value:T.defaultSocialFormat,onChange:ye,className:"block w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background",children:[e.jsx("option",{value:"instagram",children:"Instagram (1:1)"}),e.jsx("option",{value:"story",children:"Instagram Story (9:16)"}),e.jsx("option",{value:"facebook",children:"Facebook (16:9)"}),e.jsx("option",{value:"twitter",children:"Twitter (16:9)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(y,{type:"submit",disabled:I.isPending,className:"min-w-[120px]",children:I.isPending?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"ml-2 h-4 w-4"}),"حفظ الإعدادات"]})})})]})})]})}),e.jsx(R,{value:"email",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"إعدادات البريد الإلكتروني"}),e.jsx(g,{children:"تكوين خدمة البريد الإلكتروني والإشعارات"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"emailSender",children:"البريد الإلكتروني للمرسل"}),e.jsx(l,{id:"emailSender",name:"emailSender",type:"email",value:o.emailSender,onChange:E})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"emailReplyTo",children:"البريد الإلكتروني للرد"}),e.jsx(l,{id:"emailReplyTo",name:"emailReplyTo",type:"email",value:o.emailReplyTo,onChange:E})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"emailTemplateDir",children:"مسار قوالب البريد الإلكتروني"}),e.jsx(l,{id:"emailTemplateDir",name:"emailTemplateDir",value:o.emailTemplateDir,onChange:E})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"sendgridApiKey",children:"مفتاح API لـ SendGrid"}),e.jsx(l,{id:"sendgridApiKey",name:"sendgridApiKey",type:"password",value:o.sendgridApiKey,onChange:E})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"emailFooterText",children:"نص تذييل البريد الإلكتروني"}),e.jsx(re,{id:"emailFooterText",name:"emailFooterText",rows:3,value:o.emailFooterText,onChange:E})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"enableEmailNotifications",checked:o.enableEmailNotifications,onCheckedChange:s=>C(s,"email","enableEmailNotifications")}),e.jsx(a,{htmlFor:"enableEmailNotifications",children:"تفعيل إشعارات البريد الإلكتروني"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"emailNotifyOnNewUser",checked:o.emailNotifyOnNewUser,onCheckedChange:s=>C(s,"email","emailNotifyOnNewUser")}),e.jsx(a,{htmlFor:"emailNotifyOnNewUser",children:"إشعار عند تسجيل مستخدم جديد"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"emailNotifyOnNewCard",checked:o.emailNotifyOnNewCard,onCheckedChange:s=>C(s,"email","emailNotifyOnNewCard")}),e.jsx(a,{htmlFor:"emailNotifyOnNewCard",children:"إشعار عند إنشاء بطاقة جديدة"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(d,{id:"emailNotifyOnNewCertificate",checked:o.emailNotifyOnNewCertificate,onCheckedChange:s=>C(s,"email","emailNotifyOnNewCertificate")}),e.jsx(a,{htmlFor:"emailNotifyOnNewCertificate",children:"إشعار عند إصدار شهادة جديدة"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[e.jsx(y,{type:"button",variant:"outline",onClick:ke,disabled:z.isPending,children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الإرسال..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"ml-2 h-4 w-4"}),"اختبار الإرسال"]})}),e.jsx(y,{type:"submit",disabled:G.isPending,className:"min-w-[120px]",children:G.isPending?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"ml-2 h-4 w-4"}),"حفظ الإعدادات"]})})]})]})})]})}),e.jsx(R,{value:"storage",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"إعدادات التخزين"}),e.jsx(g,{children:"تكوين خيارات تخزين الملفات والصور"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:be,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"storageType",children:"نوع التخزين"}),e.jsxs("select",{id:"storageType",name:"storageType",value:m.storageType,onChange:S,className:"block w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background",children:[e.jsx("option",{value:"local",children:"Local Storage"}),e.jsx("option",{value:"s3",children:"Amazon S3"})]})]}),m.storageType==="local"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"localStoragePath",children:"مسار التخزين المحلي"}),e.jsx(l,{id:"localStoragePath",name:"localStoragePath",value:m.localStoragePath,onChange:S})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"s3Bucket",children:"S3 Bucket"}),e.jsx(l,{id:"s3Bucket",name:"s3Bucket",value:m.s3Bucket,onChange:S})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"s3Region",children:"S3 Region"}),e.jsx(l,{id:"s3Region",name:"s3Region",value:m.s3Region,onChange:S})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"s3AccessKey",children:"S3 Access Key"}),e.jsx(l,{id:"s3AccessKey",name:"s3AccessKey",value:m.s3AccessKey,onChange:S})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"s3SecretKey",children:"S3 Secret Key"}),e.jsx(l,{id:"s3SecretKey",name:"s3SecretKey",type:"password",value:m.s3SecretKey,onChange:S})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"maxUploadSize",children:"الحد الأقصى لحجم الملف (ميجابايت)"}),e.jsx(l,{id:"maxUploadSize",name:"maxUploadSize",type:"number",min:"1",max:"100",value:m.maxUploadSize,onChange:S})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"imageCacheTime",children:"مدة تخزين الصور مؤقتاً (أيام)"}),e.jsx(l,{id:"imageCacheTime",name:"imageCacheTime",type:"number",min:"1",max:"365",value:m.imageCacheTime,onChange:S})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"allowedFileTypes",children:"أنواع الملفات المسموح بها (مفصولة بفواصل)"}),e.jsx(l,{id:"allowedFileTypes",name:"allowedFileTypes",value:m.allowedFileTypes,onChange:S,placeholder:"png,jpg,jpeg,gif,webp"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(y,{type:"submit",disabled:Q.isPending,className:"min-w-[120px]",children:Q.isPending?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"ml-2 h-4 w-4"}),"حفظ الإعدادات"]})})})]})})]})}),e.jsx(R,{value:"security",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"إعدادات الأمان"}),e.jsx(g,{children:"تكوين خيارات الأمان والحماية"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"sessionTimeout",children:"مدة الجلسة (ساعات)"}),e.jsx(l,{id:"sessionTimeout",name:"sessionTimeout",type:"number",min:"1",max:"720",value:x.sessionTimeout,onChange:P})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"maxLoginAttempts",children:"الحد الأقصى لمحاولات تسجيل الدخول"}),e.jsx(l,{id:"maxLoginAttempts",name:"maxLoginAttempts",type:"number",min:"1",max:"100",value:x.maxLoginAttempts,onChange:P})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-4",children:[e.jsx(d,{id:"enableRecaptcha",checked:x.enableRecaptcha,onCheckedChange:s=>C(s,"security","enableRecaptcha")}),e.jsx(a,{htmlFor:"enableRecaptcha",children:"تفعيل reCAPTCHA"})]}),x.enableRecaptcha&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"recaptchaSiteKey",children:"رمز الموقع (Site Key)"}),e.jsx(l,{id:"recaptchaSiteKey",name:"recaptchaSiteKey",value:x.recaptchaSiteKey,onChange:P})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"recaptchaSecretKey",children:"الرمز السري (Secret Key)"}),e.jsx(l,{id:"recaptchaSecretKey",name:"recaptchaSecretKey",type:"password",value:x.recaptchaSecretKey,onChange:P})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-4",children:[e.jsx(d,{id:"ipBlockingEnabled",checked:x.ipBlockingEnabled,onCheckedChange:s=>C(s,"security","ipBlockingEnabled")}),e.jsx(a,{htmlFor:"ipBlockingEnabled",children:"تفعيل حظر عناوين IP"})]}),x.ipBlockingEnabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"ipBlockingThreshold",children:"عتبة المحاولات للحظر"}),e.jsx(l,{id:"ipBlockingThreshold",name:"ipBlockingThreshold",type:"number",min:"1",max:"100",value:x.ipBlockingThreshold,onChange:P})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"ipBlockingTime",children:"مدة الحظر (دقائق)"}),e.jsx(l,{id:"ipBlockingTime",name:"ipBlockingTime",type:"number",min:"1",max:"1440",value:x.ipBlockingTime,onChange:P})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(y,{type:"submit",disabled:V.isPending,className:"min-w-[120px]",children:V.isPending?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الحفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"ml-2 h-4 w-4"}),"حفظ الإعدادات"]})})})]})})]})}),e.jsxs(R,{value:"maintenance",className:"space-y-4",children:[e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"أدوات الصيانة"}),e.jsx(g,{children:"أدوات لصيانة وإدارة النظام"})]}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"pb-2",children:[e.jsx(u,{className:"text-lg",children:"إعادة تشغيل الخادم"}),e.jsx(g,{children:"إعادة تشغيل خادم التطبيق"})]}),e.jsxs(j,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"استخدم هذا الخيار لإعادة تشغيل الخادم في حالة وجود مشاكل. سيؤدي ذلك إلى قطع الاتصال بجميع المستخدمين."}),e.jsx(y,{variant:"outline",onClick:Ce,disabled:X,className:"w-full",children:X?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري إعادة التشغيل..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"ml-2 h-4 w-4"}),"إعادة تشغيل الخادم"]})})]})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"pb-2",children:[e.jsx(u,{className:"text-lg",children:"مسح ذاكرة التخزين المؤقت"}),e.jsx(g,{children:"مسح ملفات التخزين المؤقت للنظام"})]}),e.jsxs(j,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"استخدم هذا الخيار لمسح ذاكرة التخزين المؤقت في حالة وجود مشاكل في عرض الملفات أو البيانات."}),e.jsx(y,{variant:"outline",onClick:we,disabled:ee,className:"w-full",children:ee?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري المسح..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"ml-2 h-4 w-4"}),"مسح ذاكرة التخزين المؤقت"]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"pb-2",children:[e.jsx(u,{className:"text-lg",children:"تنظيف الملفات المرفوعة"}),e.jsx(g,{children:"حذف الملفات المرفوعة غير المستخدمة"})]}),e.jsxs(j,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"استخدم هذا الخيار لتنظيف مساحة التخزين عن طريق حذف الملفات المرفوعة غير المستخدمة."}),e.jsx(y,{variant:"outline",onClick:Fe,disabled:ae,className:"w-full",children:ae?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري التنظيف..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"ml-2 h-4 w-4"}),"تنظيف الملفات المرفوعة"]})})]})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"pb-2",children:[e.jsx(u,{className:"text-lg",children:"معلومات النظام"}),e.jsx(g,{children:"معلومات عن حالة النظام"})]}),e.jsx(j,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"إصدار النظام:"}),e.jsx("span",{className:"text-sm font-medium",children:"1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"آخر تحديث:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date().toLocaleDateString("ar-SA")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"مساحة التخزين:"}),e.jsx("span",{className:"text-sm font-medium",children:m.storageType==="local"?"5.2 GB / 10 GB":"S3 Storage"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"حالة الخادم:"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"نشط"})]})]})})]})]})]})]}),e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"سجل الأحداث"}),e.jsx(g,{children:"سجل بآخر أحداث النظام"})]}),e.jsx(j,{children:e.jsx("div",{className:"bg-muted p-4 rounded-md h-[300px] overflow-auto font-mono text-xs",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"[2023-04-23 12:34:56]"})," ",e.jsx("span",{className:"text-green-600",children:"[INFO]"})," النظام يعمل بشكل طبيعي"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"[2023-04-23 12:30:22]"})," ",e.jsx("span",{className:"text-yellow-600",children:"[WARN]"})," استخدام الذاكرة مرتفع (75%)"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"[2023-04-23 12:15:43]"})," ",e.jsx("span",{className:"text-green-600",children:"[INFO]"})," تم إنشاء نسخة احتياطية بنجاح"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"[2023-04-23 11:54:12]"})," ",e.jsx("span",{className:"text-green-600",children:"[INFO]"})," تم تسجيل مستخدم جديد (user@example.com)"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"[2023-04-23 11:23:45]"})," ",e.jsx("span",{className:"text-red-600",children:"[ERROR]"})," فشل في الاتصال بخدمة البريد الإلكتروني"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"[2023-04-23 10:45:33]"})," ",e.jsx("span",{className:"text-green-600",children:"[INFO]"})," تم تحديث إعدادات النظام"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"[2023-04-23 10:30:21]"})," ",e.jsx("span",{className:"text-green-600",children:"[INFO]"})," تم بدء تشغيل النظام"]})]})})})]})]})]}),e.jsx(Ke,{open:he,onOpenChange:L,children:e.jsxs(Pe,{children:[e.jsxs(Me,{children:[e.jsx(Re,{children:N==null?void 0:N.title}),e.jsx(Ee,{children:N==null?void 0:N.description})]}),e.jsxs(Ue,{children:[e.jsx(y,{variant:"outline",onClick:()=>L(!1),children:"إلغاء"}),e.jsx(y,{variant:"destructive",onClick:()=>{N!=null&&N.action&&N.action(),L(!1)},children:"تأكيد"})]})]})})]})}export{Xe as default};
